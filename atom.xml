<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>喵先生</title>
  
  <subtitle>一个不会写代码的程序猿</subtitle>
  <link href="/atom.xml" rel="self"/>
  
  <link href="https://www.meaoo.cn/"/>
  <updated>2020-12-22T08:18:05.089Z</updated>
  <id>https://www.meaoo.cn/</id>
  
  <author>
    <name>喵先生</name>
    
  </author>
  
  <generator uri="http://hexo.io/">Hexo</generator>
  
  <entry>
    <title>IOS和Mac如何配置DoH</title>
    <link href="https://www.meaoo.cn/2020/12/22/20201222001.html"/>
    <id>https://www.meaoo.cn/2020/12/22/20201222001.html</id>
    <published>2020-12-21T16:00:00.000Z</published>
    <updated>2020-12-22T08:18:05.089Z</updated>
    
    <content type="html"><![CDATA[<h1 id="什么是DoH"><a href="#什么是DoH" class="headerlink" title="什么是DoH"></a>什么是DoH</h1><p><code>DoH</code>是<code>DNS Over HTTPS</code>的缩写.我们在访问一个网站时,会根据本机设置的DNS去查询这个域名的ip,而这个过程传统使用UDP传输协议,并且在请求的过程中并没做任何的加密操作</p><h2 id="这样会导致什么样的影响呢"><a href="#这样会导致什么样的影响呢" class="headerlink" title="这样会导致什么样的影响呢?"></a>这样会导致什么样的影响呢?</h2><p>DNS污染、劫持。也就是我们访问的并不是我们想要的真实网站。尤其是在当今广告此猖狂的年代, 各个运营商经常会返回一些我们意想不到的广告或干扰,甚至因为一些这样的广告而被受骗。其次就是udp传输明文,这样就会被记录下自己的访问记录,自己的隐私数据就会被他人拿来利用分析。</p><h1 id="DNS劫持与HTTP劫持"><a href="#DNS劫持与HTTP劫持" class="headerlink" title="DNS劫持与HTTP劫持"></a>DNS劫持与HTTP劫持</h1><h3 id="DNS劫持：当DNS不那么老实"><a href="#DNS劫持：当DNS不那么老实" class="headerlink" title="DNS劫持：当DNS不那么老实"></a>DNS劫持：当DNS不那么老实</h3><p>打个比方：</p><p>从前有个叫小刚的，他也开了家杂货店；<br>小刚发现小明的杂货店有很多客户，分外眼红，便拿钱贿赂了村口大爷(DNS服务商)，于是，当顾客让村口大爷将其带到“小明杂货店”是，村口大爷不管三七二十一将其带到“小刚杂货店”。在网络中，则是DNS服务器故意给出错误的IP地址。</p><p>这显然是无计可施的，一般来说，遇到这种人品烂的掉渣的服务商，最好的办法就是换一家，好在这年头网络条件不错，大多数DNS都不搞这种事。</p><h3 id="HTTP劫持：当ISP不那么老实"><a href="#HTTP劫持：当ISP不那么老实" class="headerlink" title="HTTP劫持：当ISP不那么老实"></a>HTTP劫持：当ISP不那么老实</h3><p>假设你向村口大爷（DNS服务器）打了个电话，“我要去小明杂货店。”结果你的电话服务商窃听了这句话，得知了你的行程；甚至将其修改为“我要去小刚杂货店。”，然后你就不明不白的被带到了另一个地方。</p><p>在这种情况下，你的DNS服务商是老实可靠的，但你的ISP（网络服务提供商）则不那么可靠。当然，一般的ISP并没有那么猖狂，他们最多不过是往你身上塞几张奇怪的广告（想必大家都有这样的经历。）你有时候会不会发现你看到的广告就是最近曾经关注过的事物？</p><p>当然随着智能设备普及，对于窃听这件事情成本越来越低，也越来越高级。比如听筒窃听。网上有那么一个视频，如果你想要一个PS5，那就对着你老爸的手机一直说PS5…用不了几个小时，你老爸看淘宝的时候，都是PS5相关商品推荐，甚至是网页也都是相关广告。（当然DoH并不能解决声音窃听这件事情。）</p><a id="more"></a><h2 id="DoH的具体原理"><a href="#DoH的具体原理" class="headerlink" title="DoH的具体原理"></a>DoH的具体原理</h2><p>DoH的具体原理其实就是在DNS外面套一层HTTPS。（而且更慢了）即流程变成了</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">你的电脑 -&gt; DoH服务器 -&gt; DNS服务器 -&gt; DoH服务器 -&gt; 你的电脑</span><br></pre></td></tr></table></figure><p>以上流程中的一个箭头代表一个HTTPS加密链接，使得该过程中的所有流量皆受到强加密，这样一来，增加破译难度及破译成本。</p><h1 id="Mac或IOS如何配置"><a href="#Mac或IOS如何配置" class="headerlink" title="Mac或IOS如何配置"></a>Mac或IOS如何配置</h1><p>由于Mac和IOS目前官方没有推出类似华为的DNS加密配置（其实就是填入DoH服务地址）</p><h3 id="目前网上的配置方式："><a href="#目前网上的配置方式：" class="headerlink" title="目前网上的配置方式："></a>目前网上的配置方式：</h3><p>1、基于浏览器自身功能（Chrome：安全DNS–》自定义、Firefox：启动基于HTTPS的DNS）<span class="exturl" data-url="aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80NTUzNzIyOC9hcnRpY2xlL2RldGFpbHMvOTk2OTI3MjQ=" title="https://blog.csdn.net/weixin_45537228/article/details/99692724">链接<i class="fa fa-external-link"></i></span></p><p>2、<code>DNSCrypt-proxy</code>其实就是在电脑上开启一个代理<span class="exturl" data-url="aHR0cHM6Ly9ibG9nLnlhby5uby90ZWNoL2RvaC5odG1s" title="https://blog.yao.no/tech/doh.html">链接<i class="fa fa-external-link"></i></span></p><p>3、基于AdGuard，在远程服务器或本地电脑开启<code>AdGuard Home</code>服务。由于AdGuard本身支持DoH设置，所以这个方法还是比较好用的，但是废钱(需要有自己的服务器)。<span class="exturl" data-url="aHR0cHM6Ly9naXRodWIuY29tL0FkZ3VhcmRUZWFtL0FkZ3VhcmRIb21l" title="https://github.com/AdguardTeam/AdguardHome">官方GitHub<i class="fa fa-external-link"></i></span></p><p>当然还有很多方法可以实现，比如<code>DNSMap</code>之类这里不一一列举。</p><p>上面这几个方法都是基于电脑去做处理，而不能解决IOS的问题。</p><h3 id="那么如何让IOS和Mac都支持DoH呢？"><a href="#那么如何让IOS和Mac都支持DoH呢？" class="headerlink" title="那么如何让IOS和Mac都支持DoH呢？"></a>那么如何让IOS和Mac都支持DoH呢？</h3><p>答案是：描述文件<span class="exturl" data-url="aHR0cHM6Ly9naXRodWIuY29tL3BhdWxtaWxsci9lbmNyeXB0ZWQtZG5z" title="https://github.com/paulmillr/encrypted-dns">GitHub地址<i class="fa fa-external-link"></i></span></p><p>GitHub库里提供了<code>AdGuard</code>、<code>Alibaba</code>、<code>Cloudflare</code>、<code>DnsPod</code>、<code>Google</code>、<code>OpenDNS</code>、<code>Quad9</code>等。</p><p>我个人使用了阿里的描述文件<span class="exturl" data-url="aHR0cHM6Ly9oZWxwLmFsaXl1bi5jb20vZG9jdW1lbnRfZGV0YWlsLzE3NjgyMS5odG1s" title="https://help.aliyun.com/document_detail/176821.html">官方说明文档<i class="fa fa-external-link"></i></span>当然你可以对描述文件进行二次编辑。</p><h3 id="Mac"><a href="#Mac" class="headerlink" title="Mac"></a>Mac</h3><p>将GitHun仓库中的描述文件下载到本地，双击你需要的描述文件即可。</p><h3 id="IOS"><a href="#IOS" class="headerlink" title="IOS"></a>IOS</h3><p>将描述文件发送到手机–&gt;打开–&gt;允许即可。</p><p>阿里云DoH：<code>https://dns.alidns.com/dns-query</code></p><p>个人阿里云DoH：<code>https://**userid**.alidns.com/dns-query</code></p><h1 id="结束"><a href="#结束" class="headerlink" title="结束"></a>结束</h1><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">E-mail：blog<span class="meta">@meaoo</span>.cn</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      &lt;h1 id=&quot;什么是DoH&quot;&gt;&lt;a href=&quot;#什么是DoH&quot; class=&quot;headerlink&quot; title=&quot;什么是DoH&quot;&gt;&lt;/a&gt;什么是DoH&lt;/h1&gt;&lt;p&gt;&lt;code&gt;DoH&lt;/code&gt;是&lt;code&gt;DNS Over HTTPS&lt;/code&gt;的缩写.我们在访问一个网站时,会根据本机设置的DNS去查询这个域名的ip,而这个过程传统使用UDP传输协议,并且在请求的过程中并没做任何的加密操作&lt;/p&gt;
&lt;h2 id=&quot;这样会导致什么样的影响呢&quot;&gt;&lt;a href=&quot;#这样会导致什么样的影响呢&quot; class=&quot;headerlink&quot; title=&quot;这样会导致什么样的影响呢?&quot;&gt;&lt;/a&gt;这样会导致什么样的影响呢?&lt;/h2&gt;&lt;p&gt;DNS污染、劫持。也就是我们访问的并不是我们想要的真实网站。尤其是在当今广告此猖狂的年代, 各个运营商经常会返回一些我们意想不到的广告或干扰,甚至因为一些这样的广告而被受骗。其次就是udp传输明文,这样就会被记录下自己的访问记录,自己的隐私数据就会被他人拿来利用分析。&lt;/p&gt;
&lt;h1 id=&quot;DNS劫持与HTTP劫持&quot;&gt;&lt;a href=&quot;#DNS劫持与HTTP劫持&quot; class=&quot;headerlink&quot; title=&quot;DNS劫持与HTTP劫持&quot;&gt;&lt;/a&gt;DNS劫持与HTTP劫持&lt;/h1&gt;&lt;h3 id=&quot;DNS劫持：当DNS不那么老实&quot;&gt;&lt;a href=&quot;#DNS劫持：当DNS不那么老实&quot; class=&quot;headerlink&quot; title=&quot;DNS劫持：当DNS不那么老实&quot;&gt;&lt;/a&gt;DNS劫持：当DNS不那么老实&lt;/h3&gt;&lt;p&gt;打个比方：&lt;/p&gt;
&lt;p&gt;从前有个叫小刚的，他也开了家杂货店；&lt;br&gt;小刚发现小明的杂货店有很多客户，分外眼红，便拿钱贿赂了村口大爷(DNS服务商)，于是，当顾客让村口大爷将其带到“小明杂货店”是，村口大爷不管三七二十一将其带到“小刚杂货店”。在网络中，则是DNS服务器故意给出错误的IP地址。&lt;/p&gt;
&lt;p&gt;这显然是无计可施的，一般来说，遇到这种人品烂的掉渣的服务商，最好的办法就是换一家，好在这年头网络条件不错，大多数DNS都不搞这种事。&lt;/p&gt;
&lt;h3 id=&quot;HTTP劫持：当ISP不那么老实&quot;&gt;&lt;a href=&quot;#HTTP劫持：当ISP不那么老实&quot; class=&quot;headerlink&quot; title=&quot;HTTP劫持：当ISP不那么老实&quot;&gt;&lt;/a&gt;HTTP劫持：当ISP不那么老实&lt;/h3&gt;&lt;p&gt;假设你向村口大爷（DNS服务器）打了个电话，“我要去小明杂货店。”结果你的电话服务商窃听了这句话，得知了你的行程；甚至将其修改为“我要去小刚杂货店。”，然后你就不明不白的被带到了另一个地方。&lt;/p&gt;
&lt;p&gt;在这种情况下，你的DNS服务商是老实可靠的，但你的ISP（网络服务提供商）则不那么可靠。当然，一般的ISP并没有那么猖狂，他们最多不过是往你身上塞几张奇怪的广告（想必大家都有这样的经历。）你有时候会不会发现你看到的广告就是最近曾经关注过的事物？&lt;/p&gt;
&lt;p&gt;当然随着智能设备普及，对于窃听这件事情成本越来越低，也越来越高级。比如听筒窃听。网上有那么一个视频，如果你想要一个PS5，那就对着你老爸的手机一直说PS5…用不了几个小时，你老爸看淘宝的时候，都是PS5相关商品推荐，甚至是网页也都是相关广告。（当然DoH并不能解决声音窃听这件事情。）&lt;/p&gt;
    
    </summary>
    
    
      <category term="Tool" scheme="https://www.meaoo.cn/categories/Tool/"/>
    
    
      <category term="Tool" scheme="https://www.meaoo.cn/tags/Tool/"/>
    
      <category term="DoH" scheme="https://www.meaoo.cn/tags/DoH/"/>
    
  </entry>
  
  <entry>
    <title>如何克服焦虑</title>
    <link href="https://www.meaoo.cn/2020/05/13/20200513001.html"/>
    <id>https://www.meaoo.cn/2020/05/13/20200513001.html</id>
    <published>2020-05-12T16:00:00.000Z</published>
    <updated>2020-05-13T06:35:35.180Z</updated>
    
    <content type="html"><![CDATA[<blockquote><p>焦虑是每个人偶尔都会有的一种正常而且健康的情绪。但是焦虑可能会演变成一种心理障碍，降低你应对这种情感的能力。当你试图克服这种心理障碍时，不要尝试消除焦虑，而要建立自己的应对体系。拥有解决焦虑根源的能力才是克服焦虑的关键。焦虑可能会引发更加严重的心理健康问题，例如长期抑郁，所以不要让焦虑左右你。</p></blockquote><h1 id="方法1"><a href="#方法1" class="headerlink" title="方法1"></a>方法1</h1><h2 id="检查焦虑情绪"><a href="#检查焦虑情绪" class="headerlink" title="检查焦虑情绪"></a>检查焦虑情绪</h2><h3 id="I"><a href="#I" class="headerlink" title="I"></a>I</h3><p>意识到并承认自己的焦虑。不要因为焦虑而责怪自己，或者说丧气话，比如“我永远也摆脱不了它”，或者“我无能为力”等等。要相信自己有能力克服它，并且你最终也会战胜它。</p><h3 id="II"><a href="#II" class="headerlink" title="II"></a>II</h3><p>弄清焦虑的根源。不管你是惊恐发作，还是突然开始忧虑和恐惧，一定要弄清楚，到底是什么导致了你的焦虑。周围环境中的某个东西是你焦虑的主要来源吗？是某场意外引起的吗？是某个即将进行的活动或者会议造成了你的焦虑吗？只有弄清楚恐惧的根源，你才能更轻松地应对它。</p><h3 id="专家提示"><a href="#专家提示" class="headerlink" title="专家提示"></a>专家提示</h3><div class="note success">            <p>要明白，焦虑有时也是有益的。临床心理学家克洛伊卡迈克尔（Chloe Carmichael）博士说：“我们有时不愿意起床。这并不总是一件坏事。这其实是大自然母亲在用她的方式告诉你，你太累了，是时候休息了。知道自己什么时候需要休息是保持健康的关键。如果这种情况非常频繁，或者较你的生活习惯而言，发生得过于频繁的话，你可能需要找个人谈一谈。”</p>          </div><h3 id="III"><a href="#III" class="headerlink" title="III"></a>III</h3><p>判断你是否能够解决你的担忧。如果你知道自己怕的是什么，那么第二步就是判断自己能否解决这个问题，或者说这是不是只有时间（或者想象）才能应对的问题。如果你的恐惧大部分来源于你的想象，或者你现在无法处理，那么有意识地控制自己不要去想这些东西。如果你的担忧是一些需要着手解决的东西，那就采取措施，制定行动方案。</p><ul><li>你可以做什么来缓解这种恐惧或者担忧呢？</li><li>这是一种长期的，还是短期的解决方案？</li><li>我该如何防止这种担忧或者恐惧再次发生？</li></ul><a id="more"></a><h3 id="IV"><a href="#IV" class="headerlink" title="IV"></a>IV</h3><p>考虑最坏的情况。如果你因为恐惧耗费了大量心神，花点时间想一想，符合实际的最坏的结果到底是什么。假如说你在为一场大型演讲做准备，你因此而恐慌，停下来想一想“最坏的结果是什么”。不管你的反应有多夸张，辩证地去思考，你就会明白，即使结果再糟糕，也很少有事情是无法合理解决的。</p><h3 id="V"><a href="#V" class="headerlink" title="V"></a>V</h3><p>接受不确定性。如果不知道事情将如何发展，我们确实很难停止担忧。事事皆有不确定性，我们要学会接受这个事实。我们不知道事情将如何发展，或者结局会是什么。担心未知的东西会给你带来没有必要的恐惧， 但只要学会接受各种可能性，这个恐惧自然会消失。</p><h3 id="VI"><a href="#VI" class="headerlink" title="VI"></a>VI</h3><p>想想你的担心是否有用。担心总是有原因的，焦虑是对真实或者想象情景的一种恐惧反应。而当我们担心某些实际上对我们没有伤害的事时，问题自然就出现了。所以想一想你担心的目的，你的担忧有用吗？如果你因为合理的危险而担心，那担忧也是应当的。但是如果你毫无理由地担忧，那就是自己被忧虑打败了。记住这一点可以帮你摆脱焦虑的情绪。</p><h1 id="方法2"><a href="#方法2" class="headerlink" title="方法2"></a>方法2</h1><h2 id="避免认知扭曲"><a href="#避免认知扭曲" class="headerlink" title="避免认知扭曲"></a>避免认知扭曲</h2><h3 id="I-1"><a href="#I-1" class="headerlink" title="I"></a>I</h3><p>既要关注积极的一面，也要关注消极的一面。当你为某事而忧心时，很容易只关注消极的一面。任何事物都有坏的一面和好的一面，你所恐惧的东西也是如此。不要因为过分关注消极的事件，而完全忽略和它积极的方面。</p><h3 id="II-1"><a href="#II-1" class="headerlink" title="II"></a>II</h3><p>不要陷入“非黑即白”的思考模式。不管接下来会发生什么，事情的结果不可能是完全好，或者完全坏的。不要让自己忽略“黑”“白”之间的“灰色地带”，从而过分夸大某些东西。比方说，你没有被某个大学录取，你觉得自己是个完全的失败者，没有人想要你。这样的想法常常伴随着焦虑。但它其实是一种很荒谬的想法。</p><h3 id="III-1"><a href="#III-1" class="headerlink" title="III"></a>III</h3><p>不要让担忧灾难化。如果你所担心的事情并没有什么危害，甚至很大程度上只是你的想象，继续将它灾难化的话，只会让事情更糟。如果你害怕坐飞机，飞机一遇到气流，你便以为要坠机，这只会加剧你的忧虑。现实地看待所有的事情，不要只想着可能发生的事。</p><h3 id="IV-1"><a href="#IV-1" class="headerlink" title="IV"></a>IV</h3><p>不要过早下定论。没有事实依据，也没有亲身经历担忧或者恐惧之事时，过早地下结论并不是好事。如果你有不确定的事情，只要想着你并不知道会发生什么，那你的焦虑自然会减少。考虑所有可能的后果，而不要总是想着最恐怖、最不可能的结论。</p><h3 id="V-1"><a href="#V-1" class="headerlink" title="V"></a>V</h3><p>不要让情绪控制你的理智。人在恐惧和焦虑的时候，总是容易被情绪冲昏头。你的情绪也是如此，它们会让你误以为你处在极度的危险中，而忽略了现实的情况。除非你真的身处险境，否则不要相信恐惧所带来的危机感。当心所有和焦虑有关的负面情绪，比如紧张、愧疚和尴尬等等。</p><h3 id="VI-1"><a href="#VI-1" class="headerlink" title="VI"></a>VI</h3><p>不要所有的事情都怪自己。焦虑发作的时候，不要因为不可控的情况而责怪自己。假如有人闯进了你的家，你因此担心和害怕，很容易把这个事情一直放在心上，并因此责怪自己。这种想法毫无逻辑，只会让你感觉更糟。除非是你故意把小偷引到家里来，不然你就没有理由为他们的行为而负责。</p><h1 id="方法3"><a href="#方法3" class="headerlink" title="方法3"></a>方法3</h1><h2 id="试试已证实的减压法"><a href="#试试已证实的减压法" class="headerlink" title="试试已证实的减压法"></a>试试已证实的减压法</h2><h3 id="I-2"><a href="#I-2" class="headerlink" title="I"></a>I</h3><p>深呼吸。人在焦虑的时候，呼吸会加快，大脑供氧量也会减少。这会使得你思路混乱， 难以形成合理的推论。花点时间专注在腹式呼吸上。深呼吸4秒，然后屏气4秒，最后呼气4秒。如此重复1到2分钟，可以快速平复你的神经。如果你不知道该用哪个部位呼吸，将手放在肚子上，感受腹部随着呼吸而起伏。</p><h3 id="II-2"><a href="#II-2" class="headerlink" title="II"></a>II</h3><p>花点时间运动。不管你的焦虑是突然发作，还是长期以来的毛病，运动一定能起到缓解的作用。身体的活动能释放让你开心的内啡肽，并抑制释放压力的皮质醇。每到有压力的时候，运动运动或者散散步。经常运动除了能起到即时的治疗效果外，还能长期缓解你的焦虑。</p><h3 id="III-2"><a href="#III-2" class="headerlink" title="III"></a>III</h3><p>冥想,有意识地将意识从压力源上转移开，并集中在一些平和的事上，这样焦虑和恐惧会大大降低。焦虑发作的时候，专注于内心，然后重复一些积极的咒语或者祷告。把精神全部集中在这上面，最终焦虑会自然散去。</p><h3 id="IV-2"><a href="#IV-2" class="headerlink" title="IV"></a>IV</h3><p>保持健康的饮食。虽然把早饭和焦虑联系在一起，听起来有一些奇怪，但是你吃的东西确实对情绪有着很大的影响。有研究表明，不健康的饮食和高度焦虑、压力有着一定的联系。试着每天食用更多的水果、蔬菜和全谷物。检测自己是否对某种食物过敏，焦虑也是食物过敏的常见表现之一。</p><h3 id="V-2"><a href="#V-2" class="headerlink" title="V"></a>V</h3><p>去看医生。如果焦虑已经严重到无法克服的程度了，不要羞于启齿，直接去看医生。这就像你受伤了要去医院治疗一样。为了心理健康，你同样要去看心理医生。如果你有慢性焦虑症，或者焦虑总是反复发作，最好接受专业的心理诊断，并通过专门的疗法或者药物进行治疗。</p><h1 id="小提示"><a href="#小提示" class="headerlink" title="小提示"></a>小提示</h1><ul><li>不喝咖啡因含量高的饮品，它会刺激你的系统，不仅起不到放松的作用，还会累积更多的压力。</li><li>在服用任何抗压药之前，先试试所有简单的治疗手段。服用抗压药物很简单，但是要停止服用就不太可能了。</li><li>涂抹薰衣草精油放松，并舒缓神经。在耳垂附近滴一滴精油就能发挥神奇的作用。</li><li>找到能让你开心的东西，比如读书、电视节目、电影或歌曲。每当你焦虑时，就听听、读读、看看那个东西。</li></ul><h1 id="警告"><a href="#警告" class="headerlink" title="警告"></a>警告</h1><ul><li>为了避免和其它药物发挥冲突，即便是药效最弱的药，也要咨询医生后才能服用。</li><li>这些措施并不能代替专业的治疗，它们对于较轻的问题或许有一定的帮助。但严重的恐惧症要及时就医。因焦虑或者紧张而压力过大，可能会损害神经系统，影响血压。不及时治疗的话，你的恐惧症会对身体造成严重的影响，引发社交障碍，并剥夺你直面问题的信心。</li><li>如果这些建议都没有帮助，在社交场合，你的不安还是会通过行为表现出来。那这应该是一种需要治疗的焦虑症，而不是单纯的担心而已。</li></ul><h1 id="结束"><a href="#结束" class="headerlink" title="结束"></a>结束</h1><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">E-mail：blog<span class="meta">@meaoo</span>.cn</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      &lt;blockquote&gt;
&lt;p&gt;焦虑是每个人偶尔都会有的一种正常而且健康的情绪。但是焦虑可能会演变成一种心理障碍，降低你应对这种情感的能力。当你试图克服这种心理障碍时，不要尝试消除焦虑，而要建立自己的应对体系。拥有解决焦虑根源的能力才是克服焦虑的关键。焦虑可能会引发更加严重的心理健康问题，例如长期抑郁，所以不要让焦虑左右你。&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h1 id=&quot;方法1&quot;&gt;&lt;a href=&quot;#方法1&quot; class=&quot;headerlink&quot; title=&quot;方法1&quot;&gt;&lt;/a&gt;方法1&lt;/h1&gt;&lt;h2 id=&quot;检查焦虑情绪&quot;&gt;&lt;a href=&quot;#检查焦虑情绪&quot; class=&quot;headerlink&quot; title=&quot;检查焦虑情绪&quot;&gt;&lt;/a&gt;检查焦虑情绪&lt;/h2&gt;&lt;h3 id=&quot;I&quot;&gt;&lt;a href=&quot;#I&quot; class=&quot;headerlink&quot; title=&quot;I&quot;&gt;&lt;/a&gt;I&lt;/h3&gt;&lt;p&gt;意识到并承认自己的焦虑。不要因为焦虑而责怪自己，或者说丧气话，比如“我永远也摆脱不了它”，或者“我无能为力”等等。要相信自己有能力克服它，并且你最终也会战胜它。&lt;/p&gt;
&lt;h3 id=&quot;II&quot;&gt;&lt;a href=&quot;#II&quot; class=&quot;headerlink&quot; title=&quot;II&quot;&gt;&lt;/a&gt;II&lt;/h3&gt;&lt;p&gt;弄清焦虑的根源。不管你是惊恐发作，还是突然开始忧虑和恐惧，一定要弄清楚，到底是什么导致了你的焦虑。周围环境中的某个东西是你焦虑的主要来源吗？是某场意外引起的吗？是某个即将进行的活动或者会议造成了你的焦虑吗？只有弄清楚恐惧的根源，你才能更轻松地应对它。&lt;/p&gt;
&lt;h3 id=&quot;专家提示&quot;&gt;&lt;a href=&quot;#专家提示&quot; class=&quot;headerlink&quot; title=&quot;专家提示&quot;&gt;&lt;/a&gt;专家提示&lt;/h3&gt;&lt;div class=&quot;note success&quot;&gt;
            &lt;p&gt;要明白，焦虑有时也是有益的。临床心理学家克洛伊卡迈克尔（Chloe Carmichael）博士说：“我们有时不愿意起床。这并不总是一件坏事。这其实是大自然母亲在用她的方式告诉你，你太累了，是时候休息了。知道自己什么时候需要休息是保持健康的关键。如果这种情况非常频繁，或者较你的生活习惯而言，发生得过于频繁的话，你可能需要找个人谈一谈。”&lt;/p&gt;
          &lt;/div&gt;

&lt;h3 id=&quot;III&quot;&gt;&lt;a href=&quot;#III&quot; class=&quot;headerlink&quot; title=&quot;III&quot;&gt;&lt;/a&gt;III&lt;/h3&gt;&lt;p&gt;判断你是否能够解决你的担忧。如果你知道自己怕的是什么，那么第二步就是判断自己能否解决这个问题，或者说这是不是只有时间（或者想象）才能应对的问题。如果你的恐惧大部分来源于你的想象，或者你现在无法处理，那么有意识地控制自己不要去想这些东西。如果你的担忧是一些需要着手解决的东西，那就采取措施，制定行动方案。&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;你可以做什么来缓解这种恐惧或者担忧呢？&lt;/li&gt;
&lt;li&gt;这是一种长期的，还是短期的解决方案？&lt;/li&gt;
&lt;li&gt;我该如何防止这种担忧或者恐惧再次发生？&lt;/li&gt;
&lt;/ul&gt;
    
    </summary>
    
    
      <category term="how" scheme="https://www.meaoo.cn/categories/how/"/>
    
    
      <category term="how" scheme="https://www.meaoo.cn/tags/how/"/>
    
      <category term="soup" scheme="https://www.meaoo.cn/tags/soup/"/>
    
  </entry>
  
  <entry>
    <title>如何和猫咪交流</title>
    <link href="https://www.meaoo.cn/2020/05/12/20200512001.html"/>
    <id>https://www.meaoo.cn/2020/05/12/20200512001.html</id>
    <published>2020-05-11T16:00:00.000Z</published>
    <updated>2020-05-12T11:04:43.248Z</updated>
    
    <content type="html"><![CDATA[<blockquote><p>科学家已经发现，猫咪们其实有一套自己的交流方式，而这种交流并不简单，其中包含了数百种不同的声音，用以向主人表达它们的不同需求。如果可以弄懂猫咪想要和你“说”些什么，并且明白猫咪如何理解人类的交流方式，你就可以与你的猫咪更好地理解对方，建立更加亲密友好的关系。</p></blockquote><h1 id="方法1"><a href="#方法1" class="headerlink" title="方法1"></a>方法1</h1><h2 id="读懂猫咪的身体语言"><a href="#读懂猫咪的身体语言" class="headerlink" title="读懂猫咪的身体语言"></a>读懂猫咪的身体语言</h2><h3 id="I"><a href="#I" class="headerlink" title="I"></a>I</h3><p>观察猫咪的尾巴。和狗一样，猫也会通过尾部的动作来交流。了解猫咪声音语言的基础上再了解它们用尾巴传递出的信号，可以帮助你更准确地了解猫咪的需要。常见的尾部动作的含义如下：</p><ul><li>尾巴直直地竖起来，尾端稍稍卷起，意味着猫咪很开心。</li><li>如果猫咪的尾巴一抽一抽的，那么它很可能要么很兴奋，要么很紧张。</li><li>尾巴上的毛竖起来，或者显得蓬松而浓密，意味着猫咪感觉受到了威胁。</li><li>尾巴不停摆动，意味着猫咪见到你很高兴。</li><li>如果猫咪尾巴呈“N”字形，上面的毛竖起来，那么就意味着这时的猫咪极具进攻性。这种动作经常在打架或者自我防卫的时候出现。</li><li>尾巴上的毛竖起来，但是尾巴是垂下来的，那么就是指猫咪感觉受到了威胁，或者有进攻的想法。</li><li>尾巴低低地垂下来，藏在屁股后边，则意味着猫咪很害怕。</li></ul><h3 id="II"><a href="#II" class="headerlink" title="II"></a>II</h3><p>观察猫咪的眼睛。注视猫咪的眼睛有助于和它建立感情，并了解它的想法。但是要小心，直愣愣地盯着，眼都不眨的话，表示进攻，会让猫咪觉得不舒服的。</p><ul><li>如果猫咪瞳孔放大，那么它要么是觉得好玩、兴奋；要么就是害怕，或者有进攻的想法。你可以结合它的其他表现来弄清楚究竟是那种情况。</li><li>如果猫咪直视你的眼睛，意味着它很信任你，愿意呆在你身边。</li><li>猫咪慢慢地眨眼睛，也是表达感情的方式，意思是和你呆在一起很舒服。</li></ul><a id="more"></a><h3 id="III"><a href="#III" class="headerlink" title="III"></a>III</h3><p>留意猫咪的其他身体语言。既然猫咪对身体语言的掌握比人类更娴熟，那么自然会利用一些动作配合叫声来表达它的想法。</p><ul><li>猫咪抬起鼻子，脑袋稍稍歪向一边，意思是“我认识你。”有时候猫咪会坐在窗户边，用这种方式和你打招呼。</li><li>如果猫咪感到害怕、紧张焦虑，或者仅仅是为了好玩，耳朵会朝后贴在脑袋上。如果猫咪嗅到了什么让它感到好奇的东西，它也会这么做。</li><li>猫咪轻轻把舌头伸出来，舔下嘴唇，表示它有点担心、忧虑。</li></ul><h3 id="IV"><a href="#IV" class="headerlink" title="IV"></a>IV</h3><p>认识猫咪的交流习惯。其实许多猫咪的交流习惯是按照你在它身边时的行为养成的。而一些特定的行为对不同的猫咪普遍适用。</p><ul><li>猫咪在你身上蹭来蹭去意思是在你身上做标记，宣示主权。</li><li>用鼻子“亲吻”是猫科动物特有的表达感情的方式，所以如果猫咪用湿湿的鼻子碰你，就是对你表示好感，愿意和你在一起。</li><li>如果猫咪用脑袋、身体一侧，或者尾巴对着人或者其他动物蹭来蹭去，则是打招呼的意思。</li><li>如果猫咪顽皮地用脑袋撞你，也是友好的表示。</li><li>猫咪会嗅人的脸，用来识别和对方的熟悉程度。</li><li>猫咪两只前爪左右轮换地在你身上有节奏地踩，像按摩一样。这也是高兴、满足、玩耍的意思。如果猫咪这么做，意味着猫咪认识你，而且信任你。</li><li>猫咪舔人是对一个人表示信任的明确信号。这时猫咪很可能已经把你当做亲人看待了，就像母猫对待小猫一样。</li><li>如果你的猫咪企图“吃”你的头发，它其实很可能只是想帮你“拾掇拾掇”，也就是说猫咪很喜欢你，而且非常信任你。</li><li>有的猫咪还会模仿你的行为，表达对你的感情。你可以试着在地上“装死”来看看它的反应。猫咪可能会过来嗅一嗅你、碰碰你，然后也躺在地上装死。</li><li>如果你的猫咪咬你咬得稍稍用力了些，意思是让你暂时不要烦它。</li></ul><h1 id="方法2"><a href="#方法2" class="headerlink" title="方法2"></a>方法2</h1><h2 id="和你的猫咪交流"><a href="#和你的猫咪交流" class="headerlink" title="和你的猫咪交流"></a>和你的猫咪交流</h2><h3 id="I-1"><a href="#I-1" class="headerlink" title="I"></a>I</h3><p>试着回应你的猫咪。猫咪们总是不断地在学习如何和我们交流，因此你和它的互动越多，它学得也就越快。</p><ul><li>和猫咪说话的时候语调可以稍稍升高一些，以示友好，因为语调较低的声音往往意味着不悦和敌意。</li><li>反复说话可以帮助猫咪更好地配合。你可以每次睡觉之前都说“睡觉啦”，这样时间一长，猫咪就学会将特定的语言和你的行动联系起来，甚至在你睡觉之前就跑到床上了。</li></ul><h3 id="II-1"><a href="#II-1" class="headerlink" title="II"></a>II</h3><p>利用非语言交流方式。猫经过训练可以明白一些词，不过对于非语言类的交流方式，它们天生就明白。所以营造温馨的气氛很重要，让猫咪明白你对它的期待，时不时地给它一些小惊喜，都可以帮助你和猫咪建立更加亲密的友谊。</p><ul><li>和猫咪进行眼神交流的时候慢慢地眨眼，猫咪就会走近你让你摸它，因为这样做告诉猫咪你并没有恶意。</li><li>尽量不要死死盯着猫的眼睛，因为这是怀有敌意的表示。</li><li>如果你的猫咪想要坐在沙发上你的旁边，但是看起来它好像还没有下定决心，那么就拍一拍你身边的位置，然后用轻柔的语气邀请它过来。</li><li>表达你的意图的时候采用的语言要始终保持一致。许多主人都会犯一个错误，就是一边爱抚宠物，一边却在说“不许”。这样做会让猫咪感到很困惑。所以，如果你想让猫咪走开，就清楚地说“等一会”，或者轻轻地推它，而不要爱抚它，这样猫咪就知道你现在想一个人呆着。大部分猫都会从不同的方向尝试靠近你。所以记得说“等一会”的时候，要有足够的耐心。</li><li>无论如何，不要冲着猫咪大喊大叫，也不要动手打它，这样只会让猫咪感觉受到威胁，惹怒猫咪，结果只会适得其反。所以，只需要表现出你不高兴就可以了，猫咪完全可以感受到你的情绪。</li></ul><h3 id="III-1"><a href="#III-1" class="headerlink" title="III"></a>III</h3><p>向猫咪传达指令。记得训练猫咪的时候你的措辞、语气，以及你的肢体语言要保持一致，这样你和猫咪才能更清楚地理解对方。</p><ul><li>最好练习一种表达命令的特定语气，用来在猫咪做错事的时候和它交流。记得要选择一种和平时说话的语气区别开来，但同时你也可以运用自如的语气，这样每次教育猫咪的时候都可以使用。如果这么做，意味着你很少使用这种语气和它说话，但是每次这么说话都很严肃，那么你的猫咪就会学会将这种声音和它做错事联系起来了。</li><li>用快速利落的语气表达命令“不可以”，最好听起来有点像猫咪发出的嘶嘶声，这样一来由于这种声音接近“猫咪语言”，交流起来也就更容易。</li><li>只要有足够的耐心，假以时日，猫咪和狗一样，也是可以训练的。你甚至还可以训练它和你握手呢。</li></ul><h1 id="方法3"><a href="#方法3" class="headerlink" title="方法3"></a>方法3</h1><h2 id="听听猫咪在说什么"><a href="#听听猫咪在说什么" class="headerlink" title="听听猫咪在说什么"></a>听听猫咪在说什么</h2><h3 id="I-2"><a href="#I-2" class="headerlink" title="I"></a>I</h3><p>弄懂猫咪发出叫声的原因和方式。其实通常而言，发出叫声并不是猫咪交流的首选方式。猫咪的“第一语言”其实是一个相对复杂的系统，包含了气味、面部表情、肢体语言、触摸等等元素。不过猫咪们很快就意识到，我们根本不理解这些猫咪和同类交流的时候使用的语言，因此它们才用声音这种“人类语言”和人交流。猫咪通过观察什么样的声音会让主人做出什么样的行动，从而不断学习如何表达自己的需求。</p><h3 id="II-2"><a href="#II-2" class="headerlink" title="II"></a>II</h3><p>观察猫咪发出“喵喵”声时周围的情况。注意观察猫咪发出叫声的时候在做什么，这样就可以分辨出不同的叫声代表什么样的请求（或者抗议）。虽然不同的猫咪发出的叫声会有所差异，但确实存在几种类型的叫声，通常分别和特定的情绪相关，如猫咪发出的咕噜咕噜的声音或者嘶嘶声。</p><ul><li>短促的叫声通常用来打招呼、表示问候的意思。</li><li>一连串的叫声则代表猫咪打招呼的时候非常兴奋。如果你有一段时间和猫咪没有见面，猫咪就会发出这样一连串的叫声来欢迎你。</li><li>声调适中的叫声往往代表猫咪有某种需求，一般不是饿了就是渴了。</li><li>而拖长的叫声则代表猫咪的这种渴求比较强烈。</li><li>低沉的叫声表示抱怨、不开心，或者是发起攻击的前兆。</li><li>响亮，但比一般情况低沉的叫声通常意味着迫切的需求，有可能是饿得厉害。</li></ul><h3 id="III-2"><a href="#III-2" class="headerlink" title="III"></a>III</h3><p>一些其他常见的交流方式。虽然猫咪大多数时候通过喵喵叫和我们交流，但它们还是会发出其他的声音。</p><ul><li>猫咪通过喉咙震动发出的咕噜咕噜声表示想与人亲近或想要引起注意。虽然咕噜声代表很多种不同的需求，不过通常而言意味着猫咪感到很心满意足。</li><li>嘶嘶声是自我防御和进攻的明确信号。如果猫咪发出嘶嘶声，就表示它不高兴、感觉受到了威胁、惊吓，或者准备发起进攻。</li></ul><h3 id="IV-1"><a href="#IV-1" class="headerlink" title="IV"></a>IV</h3><p>留意其他几种特殊的声音。虽然这几种声音比喵喵声、嘶嘶声，和咕噜咕噜的声音少见，但是理解这几种声音有助于你和猫咪更好地交流。</p><ul><li>高声咆哮通常意味着愤怒、痛苦，或者恐惧。</li><li>而颤抖的叫声则意味着兴奋、紧张，或者困惑。</li><li>还有一种介于喵喵叫和咕噜咕噜声之间的叫声，如果音调是渐渐上扬的，那么就是友好问候的意思。母猫一般就用这种声音招呼小猫。</li><li>洪亮尖声的叫声，或者听起来像“呜呜呜喵”这样的声音，意味着突如其来的疼痛，比如你踩到猫咪的尾巴时，它就会发出这种叫声。</li></ul><h1 id="小提示"><a href="#小提示" class="headerlink" title="小提示"></a>小提示</h1><ul><li>猫咪有时候轻轻地咬你只是为了好玩，或者有点不耐烦。</li><li>盘腿坐在地上看着猫咪会让它觉得你欢迎它靠近，让你摸它。</li><li>大部分猫咪都喜欢人轻轻地挠它的下巴。你可以先在猫咪的脸上或者头顶上轻轻地挠一挠，作为试探。</li><li>放下猫咪的时候，尽量确保猫咪的爪子已经安稳地着地再放手。这样猫咪和你在一起才会有安全感，觉得你是可以信赖的，这样才不会突然就从你的怀里挣脱开。如果你一直这么做，也可以在它们年老的时候以这种方式让它免于受伤。</li><li>爱猫咪、尊重猫咪，这样猫咪也会好好对你，心情愉快，成为你的好伙伴。</li><li>如果猫咪大幅地摇尾巴，通常要么是生气了，要么是兴奋地想玩，所以这时候让它自己呆着就是了。</li><li>有的猫喜欢人挠腹部，不过大部分猫还是不太喜欢这种方式，因为这意味着把最脆弱的部分暴露给别人。所以要它克服这种恐惧需要耐心。大多数猫咪比起腹部，对前胸部分的保护意识没有那么强。你可以从猫咪的前胸位置开始轻轻地挠，然后慢慢取得它的信任。如果猫咪还年幼，这种方法就更合适了。</li><li>如果你的猫咪脾气比较暴躁，那么就尽量用温柔的声音和它说话，还要给它仔细梳毛，好好喂它，并且和它玩。</li><li>缅因猫尤其喜欢玩，所以如果你养了一只缅因猫，一定要常常陪它玩。</li><li>如果想知道猫咪是否想让你摸它，就伸出一只手，记得中指伸得慢一些。你的猫咪会用鼻子轻轻碰你的手，并且用脑袋蹭，这样你就知道它想让你摸摸它的头了。</li><li>猫咪发出咕噜声也不总是意味着它很高兴，也有可能是什么弄疼了它或者它很害怕。</li><li>亚洲品种的猫，如暹罗猫尤其喜欢用声音交流，而一些长毛猫则比较安静。当然了，例外总是有的。</li><li>好好待你的猫咪，要像对待家人一样，它也会好好回报你的。</li><li>如果你养了一只德文卷毛猫，那么也一定要多多和它玩，因为这种猫咪特别喜欢玩闹。</li><li>如果你的猫咪发出嘶嘶声，让它自己呆着就好，因为这时候的猫咪正在气头上呢。</li></ul><h1 id="警告"><a href="#警告" class="headerlink" title="警告"></a>警告</h1><ul><li>猫咪到了年纪最好都做绝育手术，这样它们就不会狂躁不安，也不会动不动生一窝小猫让你无力抚养。雄猫尤其应该性成熟之前就做手术，避免养成一些不好的行为习惯。</li><li>抱猫咪的时候要小心，抱起来的时候不要抱得太紧。如果把猫咪抱得太紧它会觉得你有敌意，搞不好就会抓伤你。</li><li>如果觉得受到了其他宠物的威胁，猫咪还会留下一点排泄物标记领地。此外，这也可能意味着猫咪患有尿路感染或者其他疾病。如果问题比较严重，就应该把猫咪和其他宠物隔离开，然后去看医生及时治疗。</li></ul><h1 id="结束"><a href="#结束" class="headerlink" title="结束"></a>结束</h1><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">E-mail：blog<span class="meta">@meaoo</span>.cn</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      &lt;blockquote&gt;
&lt;p&gt;科学家已经发现，猫咪们其实有一套自己的交流方式，而这种交流并不简单，其中包含了数百种不同的声音，用以向主人表达它们的不同需求。如果可以弄懂猫咪想要和你“说”些什么，并且明白猫咪如何理解人类的交流方式，你就可以与你的猫咪更好地理解对方，建立更加亲密友好的关系。&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h1 id=&quot;方法1&quot;&gt;&lt;a href=&quot;#方法1&quot; class=&quot;headerlink&quot; title=&quot;方法1&quot;&gt;&lt;/a&gt;方法1&lt;/h1&gt;&lt;h2 id=&quot;读懂猫咪的身体语言&quot;&gt;&lt;a href=&quot;#读懂猫咪的身体语言&quot; class=&quot;headerlink&quot; title=&quot;读懂猫咪的身体语言&quot;&gt;&lt;/a&gt;读懂猫咪的身体语言&lt;/h2&gt;&lt;h3 id=&quot;I&quot;&gt;&lt;a href=&quot;#I&quot; class=&quot;headerlink&quot; title=&quot;I&quot;&gt;&lt;/a&gt;I&lt;/h3&gt;&lt;p&gt;观察猫咪的尾巴。和狗一样，猫也会通过尾部的动作来交流。了解猫咪声音语言的基础上再了解它们用尾巴传递出的信号，可以帮助你更准确地了解猫咪的需要。常见的尾部动作的含义如下：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;尾巴直直地竖起来，尾端稍稍卷起，意味着猫咪很开心。&lt;/li&gt;
&lt;li&gt;如果猫咪的尾巴一抽一抽的，那么它很可能要么很兴奋，要么很紧张。&lt;/li&gt;
&lt;li&gt;尾巴上的毛竖起来，或者显得蓬松而浓密，意味着猫咪感觉受到了威胁。&lt;/li&gt;
&lt;li&gt;尾巴不停摆动，意味着猫咪见到你很高兴。&lt;/li&gt;
&lt;li&gt;如果猫咪尾巴呈“N”字形，上面的毛竖起来，那么就意味着这时的猫咪极具进攻性。这种动作经常在打架或者自我防卫的时候出现。&lt;/li&gt;
&lt;li&gt;尾巴上的毛竖起来，但是尾巴是垂下来的，那么就是指猫咪感觉受到了威胁，或者有进攻的想法。&lt;/li&gt;
&lt;li&gt;尾巴低低地垂下来，藏在屁股后边，则意味着猫咪很害怕。&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&quot;II&quot;&gt;&lt;a href=&quot;#II&quot; class=&quot;headerlink&quot; title=&quot;II&quot;&gt;&lt;/a&gt;II&lt;/h3&gt;&lt;p&gt;观察猫咪的眼睛。注视猫咪的眼睛有助于和它建立感情，并了解它的想法。但是要小心，直愣愣地盯着，眼都不眨的话，表示进攻，会让猫咪觉得不舒服的。&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;如果猫咪瞳孔放大，那么它要么是觉得好玩、兴奋；要么就是害怕，或者有进攻的想法。你可以结合它的其他表现来弄清楚究竟是那种情况。&lt;/li&gt;
&lt;li&gt;如果猫咪直视你的眼睛，意味着它很信任你，愿意呆在你身边。&lt;/li&gt;
&lt;li&gt;猫咪慢慢地眨眼睛，也是表达感情的方式，意思是和你呆在一起很舒服。&lt;/li&gt;
&lt;/ul&gt;
    
    </summary>
    
    
      <category term="how" scheme="https://www.meaoo.cn/categories/how/"/>
    
    
      <category term="how" scheme="https://www.meaoo.cn/tags/how/"/>
    
  </entry>
  
  <entry>
    <title>Agile--敏捷</title>
    <link href="https://www.meaoo.cn/2020/04/30/20200430001.html"/>
    <id>https://www.meaoo.cn/2020/04/30/20200430001.html</id>
    <published>2020-04-29T16:00:00.000Z</published>
    <updated>2020-05-07T02:46:26.500Z</updated>
    
    <content type="html"><![CDATA[<blockquote><p>在这变幻莫测，信息爆炸的时代，我们每天接收都的信息量足够让我们的崩溃数十次。当然工作也是如此，时时刻刻面对这不确定信息和不稳定因素。那么我们如何处理以这些事情；如何响应这些事情。客观莫急，我会在后面很长时间里，在这里与大家不定期分享我个人对于敏捷的学习以及实践。</p></blockquote><h1 id="Agile【敏捷】"><a href="#Agile【敏捷】" class="headerlink" title="Agile【敏捷】"></a>Agile【敏捷】</h1><p>在2019年的后半年我才接触并意识到敏捷的存在。当时认为敏捷只是一种形式或一种概念。然后人们将某种行为或某种特定行动理解为敏捷。</p><p>最近在一次无意中接触到了敏捷更多的信息，瞬间感觉头顶往外冒凉气。可能是被我之前的无知吓到了。</p><p>敏捷不只可以用到开发、产品、项目、团队，甚至事业部、公司等等都可以用到敏捷思维，或用原文作者的词<code>敏捷框架</code>，这个框架更像是一个协议。当然我也只是看了一些零零碎碎的东西，后面我会继续搜集更多的资料扩展自己的理解以及认知。</p><p>我是从事开发的，所以我会先从开发角度去理解，然后会一步一步的理解并实践。</p><a id="more"></a><h1 id="什么是敏捷开发？"><a href="#什么是敏捷开发？" class="headerlink" title="什么是敏捷开发？"></a>什么是敏捷开发？</h1><h2 id="我的理解"><a href="#我的理解" class="headerlink" title="我的理解"></a>我的理解</h2><p>我对于敏捷开发的理解，也就是目前我的现状是这样的。一个团队，其中包含运营、产品、设计、服务端开发、前端开发、QA，这些人员在当前项目进行中，都属于当前项目所调配。且当前项目成员不受过多的外界因素所影响。当然目前来看我的这个理解其中有一小部分是对的，且这一小部分是OKR与敏捷结合的一部分。</p><h2 id="正确解释"><a href="#正确解释" class="headerlink" title="正确解释"></a>正确解释</h2><p>敏捷开发以用户的需求进化为核心，采用迭代、循序渐进的方法进行软件开发。在敏捷开发中，软件项目在构建初期被切分成多个子项目，各个子项目的成果都经过测试，具备可视、可集成和可运行使用的特征。换言之，就是把一个大项目分为多个相互联系，但也可独立运行的小项目，并分别完成，在此过程中软件一直处于可使用状态。</p><h1 id="敏捷宣言"><a href="#敏捷宣言" class="headerlink" title="敏捷宣言"></a>敏捷宣言</h1><blockquote><p>我的理解是宣言更像是概述或者是宗旨</p></blockquote><ul><li>最重要的是通过尽早和不断交付有价值的软件满足客户需要。</li><li>我们欢迎需求的变化，即使在开发后期。敏捷过程能够驾驭变化，保持客户的竞争优势。</li><li>经常交付可以工作的软件，从几星期到几个月，时间尺度越短越好。</li><li>业务人员和开发者应该在整个项目过程中始终朝夕在一起工作。</li><li>围绕斗志高昂的人进行软件开发，给开发者提供适宜的环境，满足他们的需要，并相信他们能够完成任务。</li><li>在开发小组中最有效率也最有效果的信息传达方式是面对面的交谈。</li><li>可以工作的软件是进度的主要度量标准。</li><li>敏捷过程提倡可持续开发。出资人、开发人员和用户应该总是维持不变的节奏。</li><li>对卓越技术与良好设计的不断追求将有助于提高敏捷性。</li><li>简单——尽可能减少工作量的艺术至关重要。</li><li>最好的架构、需求和设计都源自自我组织的团队。</li><li>每隔一定时间，团队都要总结如何更有效率，然后相应地调整自己的行为。</li></ul><h1 id="敏捷实践"><a href="#敏捷实践" class="headerlink" title="敏捷实践"></a>敏捷实践</h1><blockquote><p>对于敏捷建模目前我还有一些误解，还在学习中。</p></blockquote><p>敏捷建模（AM）在AM原则的基础上定义了一组核心实践（practice）和补充实践，其中的某些实践已经是极限编程（XP）中采用了的。而XP中的一些原则又是源于众所周知的软件工程学。</p><h1 id="结束"><a href="#结束" class="headerlink" title="结束"></a>结束</h1><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">E-mail：blog<span class="meta">@meaoo</span>.cn</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      &lt;blockquote&gt;
&lt;p&gt;在这变幻莫测，信息爆炸的时代，我们每天接收都的信息量足够让我们的崩溃数十次。当然工作也是如此，时时刻刻面对这不确定信息和不稳定因素。那么我们如何处理以这些事情；如何响应这些事情。客观莫急，我会在后面很长时间里，在这里与大家不定期分享我个人对于敏捷的学习以及实践。&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h1 id=&quot;Agile【敏捷】&quot;&gt;&lt;a href=&quot;#Agile【敏捷】&quot; class=&quot;headerlink&quot; title=&quot;Agile【敏捷】&quot;&gt;&lt;/a&gt;Agile【敏捷】&lt;/h1&gt;&lt;p&gt;在2019年的后半年我才接触并意识到敏捷的存在。当时认为敏捷只是一种形式或一种概念。然后人们将某种行为或某种特定行动理解为敏捷。&lt;/p&gt;
&lt;p&gt;最近在一次无意中接触到了敏捷更多的信息，瞬间感觉头顶往外冒凉气。可能是被我之前的无知吓到了。&lt;/p&gt;
&lt;p&gt;敏捷不只可以用到开发、产品、项目、团队，甚至事业部、公司等等都可以用到敏捷思维，或用原文作者的词&lt;code&gt;敏捷框架&lt;/code&gt;，这个框架更像是一个协议。当然我也只是看了一些零零碎碎的东西，后面我会继续搜集更多的资料扩展自己的理解以及认知。&lt;/p&gt;
&lt;p&gt;我是从事开发的，所以我会先从开发角度去理解，然后会一步一步的理解并实践。&lt;/p&gt;
    
    </summary>
    
    
      <category term="Agile" scheme="https://www.meaoo.cn/categories/Agile/"/>
    
    
      <category term="Agile" scheme="https://www.meaoo.cn/tags/Agile/"/>
    
  </entry>
  
  <entry>
    <title>对于管理工具的执着是否值得</title>
    <link href="https://www.meaoo.cn/2020/04/24/20200424001.html"/>
    <id>https://www.meaoo.cn/2020/04/24/20200424001.html</id>
    <published>2020-04-23T16:00:00.000Z</published>
    <updated>2020-04-24T12:26:05.226Z</updated>
    
    <content type="html"><![CDATA[<blockquote><p>智能设备的普及也诞生了很多时间管理工具，如<code>番茄类</code>、<code>Todo类</code>、<code>Calendar</code>、<code>GTD</code>，当我们尝试过十几款这类工具之后，会发现自己可能已经陷入一个怪圈无法自拔。想象中可以借助工具提高的工作效率可能还不如使用工具之前。问题出在了哪里？人的问题？工具的问题？下面是我个人的体会，只代表个人对于这件事情的理解和见解。</p></blockquote><h1 id="自黑"><a href="#自黑" class="headerlink" title="自黑"></a>自黑</h1><p>自19年初开始，我就开始寻找各种各样的时间管理工具，当初的想法很单纯，只是想记录一下当天以及以后要做的事情并能够提醒自己即可。<br>期间尝试过很多知名或非知名，专业或非专业的工具。但是效果甚微，因为我的关注点在工具而不是事情。<br>有那么一段时间，一个事情会在至少3个工具上记录，但是这些都在几天之后遗忘甚至把工具删除。删除这些工具的原因也比较正常，就是不好用，使用成本过高或者没有达到自己想要的效果。</p><h1 id="现状"><a href="#现状" class="headerlink" title="现状"></a>现状</h1><p>从20年2月份开始，发现简简单单才是真。我想起了当初使用工具的原因及初衷，然后我选择了现在的我所谓的工具套件</p><ul><li>事件提醒：提醒事项（Mac自带）</li><li>文字记录：备忘录（Mac自带）</li><li>日历：Calendar 366 II（方便查看提醒事项和日期事件）</li><li>效率追踪：RescueTime（监控电脑使用时间及时间分类，会有日报及周报发到邮箱里）</li></ul><h2 id="理由"><a href="#理由" class="headerlink" title="理由"></a>理由</h2><p>为什么使用这些工具，因为简单、方便。</p><ul><li><code>提醒事项</code>和<code>备忘录</code>可以与我手机实时同步且是原生软件稳定性更好。</li><li><code>Calendar 366</code>其实是在菜单栏中把<code>提醒事项</code>和<code>日历</code>内容放到一起且可操作。</li><li><code>RescueTime</code>是分析自己每天都在做什么。<br>就是这些，因为我的诉求也很简单。</li></ul><a id="more"></a><h1 id="表象问题"><a href="#表象问题" class="headerlink" title="表象问题"></a>表象问题</h1><p>工具，可能只是效率问题一个极其浅层次的外延表象。</p><p>我们大脑里总有一个观念，认为只要是道理都是对的，只要照着说明书给出的具体步骤，那么我也能复制别人的成功。但却往往忽视自己与方法的匹配度，忽视自己面临的真实场景，忽视自己的个性与使用习惯。很简单，即使这辆汽车速度再快，对于航海的人，它是没有意义的。</p><p>所以第一个问题，我要问自己，我的生活是否已经繁忙到需要用日程管理？是否已经复杂到需要使用工具去管理时间及任务？还是说，我是在用工具来套生活，将生活中的小事都不合时宜的丢了进去，只是因为高效人士都是这么做的。</p><h1 id="夭折的效率"><a href="#夭折的效率" class="headerlink" title="夭折的效率"></a>夭折的效率</h1><p>为什么你的待办清单总是有很多任务做不完？为什么他的清单总是空空如也？其实总结一个字<code>贪婪</code>。<br>有人会好奇，为什么两者都是贪婪？</p><p>首先要清楚清单是做什么用的？是提醒我们未来可预见时间内要做的任务和当天要做的任务。当然我们可以对这些任务进行分类，进行优先级区分这些都可以，也没问题。<br>想一想周末你的清单里有什么。是否还有任务在那里挂着等待这你去点击完成。计划每个任务不是给别人看的，而是自己要实实在在的做了这些任务且很好的完成。<br>将清单塞的满满，不是为了让你在别人面前夸夸自谈，不是为了让你赚取别人的赞扬。鱼和熊掌不可兼得，量力而行。</p><p>空空如也是因为你的清单没有当天计划，更没有未来计划。</p><p>你的效率已经被贪婪扼杀在摇篮中。</p><h1 id="钥匙"><a href="#钥匙" class="headerlink" title="钥匙"></a>钥匙</h1><p>工作中如何提升效率？</p><ul><li>确认目标：将自己的目标与团队共享</li><li>定义优先级：拆解任务，并明确任务的轻重缓急</li><li>梳理痛点：对自己的任务归类整理，知道自己面临的痛点</li><li>借助工具：依据痛点，有针对性的选择工具</li></ul><h2 id="确认目标-amp-定义优先级"><a href="#确认目标-amp-定义优先级" class="headerlink" title="确认目标 &amp; 定义优先级"></a>确认目标 &amp; 定义优先级</h2><p>目标与优先级这两个步骤，一是将自己的任务比对上级任务与业务方向，如果发现偏差及时沟通及时调整；其次是根据价值程度划定优先级。目标拆解后的事儿肯定很多，但不是什么简单做什么，而是根据价值决定首先应该做什么。</p><p>当然很多时候，我们还是会迫不得已做些无关目标的事。但整体上，目标与优先级可以使我们变得更觉察，不会是只要看到事都想去解决它。</p><p>从源头上控制事项产生，这是任何效率工具都无法达成的效果。</p><h2 id="梳理场景痛点"><a href="#梳理场景痛点" class="headerlink" title="梳理场景痛点"></a>梳理场景痛点</h2><p>完成上面的步骤，基本上我已经知道自己需要完成的任务。接下来我会把任务按性质进行归类，目的是使自己明白，我在工作中主要面临哪些场景，以及是否存在问题或痛点 。</p><ul><li>沟通场景的痛点：文字语音表达不清楚；一件事反复说</li><li>输出场景的痛点：注意力频繁被打断；工作界面不易聚焦</li><li>查询场景的痛点：信息搜索太慢；阅读信息很浮躁</li></ul><h2 id="借力工具"><a href="#借力工具" class="headerlink" title="借力工具"></a>借力工具</h2><p>挑选工具前，先想想哪些事情可以因为工具提升效率，哪些事情其实与工具无关。千万不要盲目跟风。</p><h1 id="结束"><a href="#结束" class="headerlink" title="结束"></a>结束</h1><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">E-mail：blog<span class="meta">@meaoo</span>.cn</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      &lt;blockquote&gt;
&lt;p&gt;智能设备的普及也诞生了很多时间管理工具，如&lt;code&gt;番茄类&lt;/code&gt;、&lt;code&gt;Todo类&lt;/code&gt;、&lt;code&gt;Calendar&lt;/code&gt;、&lt;code&gt;GTD&lt;/code&gt;，当我们尝试过十几款这类工具之后，会发现自己可能已经陷入一个怪圈无法自拔。想象中可以借助工具提高的工作效率可能还不如使用工具之前。问题出在了哪里？人的问题？工具的问题？下面是我个人的体会，只代表个人对于这件事情的理解和见解。&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h1 id=&quot;自黑&quot;&gt;&lt;a href=&quot;#自黑&quot; class=&quot;headerlink&quot; title=&quot;自黑&quot;&gt;&lt;/a&gt;自黑&lt;/h1&gt;&lt;p&gt;自19年初开始，我就开始寻找各种各样的时间管理工具，当初的想法很单纯，只是想记录一下当天以及以后要做的事情并能够提醒自己即可。&lt;br&gt;期间尝试过很多知名或非知名，专业或非专业的工具。但是效果甚微，因为我的关注点在工具而不是事情。&lt;br&gt;有那么一段时间，一个事情会在至少3个工具上记录，但是这些都在几天之后遗忘甚至把工具删除。删除这些工具的原因也比较正常，就是不好用，使用成本过高或者没有达到自己想要的效果。&lt;/p&gt;
&lt;h1 id=&quot;现状&quot;&gt;&lt;a href=&quot;#现状&quot; class=&quot;headerlink&quot; title=&quot;现状&quot;&gt;&lt;/a&gt;现状&lt;/h1&gt;&lt;p&gt;从20年2月份开始，发现简简单单才是真。我想起了当初使用工具的原因及初衷，然后我选择了现在的我所谓的工具套件&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;事件提醒：提醒事项（Mac自带）&lt;/li&gt;
&lt;li&gt;文字记录：备忘录（Mac自带）&lt;/li&gt;
&lt;li&gt;日历：Calendar 366 II（方便查看提醒事项和日期事件）&lt;/li&gt;
&lt;li&gt;效率追踪：RescueTime（监控电脑使用时间及时间分类，会有日报及周报发到邮箱里）&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&quot;理由&quot;&gt;&lt;a href=&quot;#理由&quot; class=&quot;headerlink&quot; title=&quot;理由&quot;&gt;&lt;/a&gt;理由&lt;/h2&gt;&lt;p&gt;为什么使用这些工具，因为简单、方便。&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;提醒事项&lt;/code&gt;和&lt;code&gt;备忘录&lt;/code&gt;可以与我手机实时同步且是原生软件稳定性更好。&lt;/li&gt;
&lt;li&gt;&lt;code&gt;Calendar 366&lt;/code&gt;其实是在菜单栏中把&lt;code&gt;提醒事项&lt;/code&gt;和&lt;code&gt;日历&lt;/code&gt;内容放到一起且可操作。&lt;/li&gt;
&lt;li&gt;&lt;code&gt;RescueTime&lt;/code&gt;是分析自己每天都在做什么。&lt;br&gt;就是这些，因为我的诉求也很简单。&lt;/li&gt;
&lt;/ul&gt;
    
    </summary>
    
    
      <category term="Life" scheme="https://www.meaoo.cn/categories/Life/"/>
    
    
      <category term="Tool" scheme="https://www.meaoo.cn/tags/Tool/"/>
    
      <category term="Life" scheme="https://www.meaoo.cn/tags/Life/"/>
    
  </entry>
  
  <entry>
    <title>Html页面支持暗黑模式</title>
    <link href="https://www.meaoo.cn/2019/12/25/20191225001.html"/>
    <id>https://www.meaoo.cn/2019/12/25/20191225001.html</id>
    <published>2019-12-24T16:00:00.000Z</published>
    <updated>2021-01-26T03:20:45.074Z</updated>
    
    <content type="html"><![CDATA[<blockquote><p>自19年开始，Android和IOS平台，都开始玩暗黑模式。当然这没什么不好，但是当我们的页面被用户在暗黑模式打开之后，会被那传统大白色瞬间闪瞎双眼。<br>下面会简单的说一下如何让页面支持暗黑模式。</p></blockquote><h1 id="准备"><a href="#准备" class="headerlink" title="准备"></a>准备</h1><p>其实，我们只是需要使用到css中的<code>prefers-color-scheme</code>媒体查询。</p><ol><li><code>no-preference</code>表示用户未制定操作系统主题。作为布尔值时，为<code>false</code>输出。</li><li><code>light</code>表示用户的操作系统是浅色主题。</li><li><code>dark</code>表示用户的操作系统是深色主题。</li></ol><h1 id="说明"><a href="#说明" class="headerlink" title="说明"></a>说明</h1><ol><li>这篇文章发布的时候，微信还无法拿到<code>prefers-color-scheme</code>参数，所以当我们在微信中打开页面目前不支持暗黑模式。</li><li>此方法只是一个简单demo，可以使用该方法拓展出其他实现方式。</li><li><span class="exturl" data-url="aHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvemgtQ04vZG9jcy9XZWIvQ1NTL0BtZWRpYS9wcmVmZXJzLWNvbG9yLXNjaGVtZQ==" title="https://developer.mozilla.org/zh-CN/docs/Web/CSS/@media/prefers-color-scheme">prefers-color-scheme说明<i class="fa fa-external-link"></i></span></li><li><span class="exturl" data-url="aHR0cHM6Ly9naXQubWVhb28uY24vbGlnaHRfZGFyay5odG1s" title="https://git.meaoo.cn/light_dark.html">DEMO地址<i class="fa fa-external-link"></i></span></li></ol><a id="more"></a><h1 id="HTML"><a href="#HTML" class="headerlink" title="HTML"></a>HTML</h1><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE html&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">"en"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"UTF-8"</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">"viewport"</span> <span class="attr">content</span>=<span class="string">"width=device-width, initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0, user-scalable=no"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>页面适应黑暗模式<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span> <span class="attr">class</span>=<span class="string">"back"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"models"</span>&gt;</span><span class="tag">&lt;<span class="name">h1</span>&gt;</span>测试文字<span class="tag">&lt;/<span class="name">h1</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure><h1 id="CSS"><a href="#CSS" class="headerlink" title="CSS"></a>CSS</h1><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.back</span> &#123;<span class="attribute">background</span>: white; <span class="attribute">color</span>:  <span class="number">#555</span>;<span class="attribute">text-align</span>: center&#125;</span><br><span class="line"></span><br><span class="line">@<span class="keyword">media</span> (prefers-color-scheme: dark) &#123;</span><br><span class="line">  <span class="selector-class">.back</span> &#123;<span class="attribute">background</span>:  <span class="number">#333</span>; <span class="attribute">color</span>: white;&#125;</span><br><span class="line">  <span class="selector-class">.models</span> &#123;<span class="attribute">border</span>:solid <span class="number">1px</span> <span class="number">#00ff00</span>&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">@<span class="keyword">media</span> (prefers-color-scheme: light) &#123;</span><br><span class="line">  <span class="selector-class">.back</span> &#123;<span class="attribute">background</span>: white; <span class="attribute">color</span>:  <span class="number">#555</span>;&#125;</span><br><span class="line">  <span class="selector-class">.models</span> &#123;<span class="attribute">border</span>:solid <span class="number">1px</span> <span class="number">#2b85e4</span>&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="DEMO"><a href="#DEMO" class="headerlink" title="DEMO"></a>DEMO</h1><video src="https://raw.githubusercontent.com/meaoo/blog_img/master/video/1577264612992701.mp4" preload="metadata" controls playsinline poster>Sorry, your browser does not support the video tag.</video><h1 id="结束"><a href="#结束" class="headerlink" title="结束"></a>结束</h1><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">E-mail：blog<span class="meta">@meaoo</span>.cn</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      &lt;blockquote&gt;
&lt;p&gt;自19年开始，Android和IOS平台，都开始玩暗黑模式。当然这没什么不好，但是当我们的页面被用户在暗黑模式打开之后，会被那传统大白色瞬间闪瞎双眼。&lt;br&gt;下面会简单的说一下如何让页面支持暗黑模式。&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h1 id=&quot;准备&quot;&gt;&lt;a href=&quot;#准备&quot; class=&quot;headerlink&quot; title=&quot;准备&quot;&gt;&lt;/a&gt;准备&lt;/h1&gt;&lt;p&gt;其实，我们只是需要使用到css中的&lt;code&gt;prefers-color-scheme&lt;/code&gt;媒体查询。&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;&lt;code&gt;no-preference&lt;/code&gt;表示用户未制定操作系统主题。作为布尔值时，为&lt;code&gt;false&lt;/code&gt;输出。&lt;/li&gt;
&lt;li&gt;&lt;code&gt;light&lt;/code&gt;表示用户的操作系统是浅色主题。&lt;/li&gt;
&lt;li&gt;&lt;code&gt;dark&lt;/code&gt;表示用户的操作系统是深色主题。&lt;/li&gt;
&lt;/ol&gt;
&lt;h1 id=&quot;说明&quot;&gt;&lt;a href=&quot;#说明&quot; class=&quot;headerlink&quot; title=&quot;说明&quot;&gt;&lt;/a&gt;说明&lt;/h1&gt;&lt;ol&gt;
&lt;li&gt;这篇文章发布的时候，微信还无法拿到&lt;code&gt;prefers-color-scheme&lt;/code&gt;参数，所以当我们在微信中打开页面目前不支持暗黑模式。&lt;/li&gt;
&lt;li&gt;此方法只是一个简单demo，可以使用该方法拓展出其他实现方式。&lt;/li&gt;
&lt;li&gt;&lt;span class=&quot;exturl&quot; data-url=&quot;aHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvemgtQ04vZG9jcy9XZWIvQ1NTL0BtZWRpYS9wcmVmZXJzLWNvbG9yLXNjaGVtZQ==&quot; title=&quot;https://developer.mozilla.org/zh-CN/docs/Web/CSS/@media/prefers-color-scheme&quot;&gt;prefers-color-scheme说明&lt;i class=&quot;fa fa-external-link&quot;&gt;&lt;/i&gt;&lt;/span&gt;&lt;/li&gt;
&lt;li&gt;&lt;span class=&quot;exturl&quot; data-url=&quot;aHR0cHM6Ly9naXQubWVhb28uY24vbGlnaHRfZGFyay5odG1s&quot; title=&quot;https://git.meaoo.cn/light_dark.html&quot;&gt;DEMO地址&lt;i class=&quot;fa fa-external-link&quot;&gt;&lt;/i&gt;&lt;/span&gt;&lt;/li&gt;
&lt;/ol&gt;
    
    </summary>
    
    
      <category term="Web" scheme="https://www.meaoo.cn/categories/Web/"/>
    
    
      <category term="Web" scheme="https://www.meaoo.cn/tags/Web/"/>
    
  </entry>
  
  <entry>
    <title>oh-my-zsh中git快捷对照表</title>
    <link href="https://www.meaoo.cn/2019/10/23/20191023001.html"/>
    <id>https://www.meaoo.cn/2019/10/23/20191023001.html</id>
    <published>2019-10-22T16:00:00.000Z</published>
    <updated>2019-10-23T07:26:58.000Z</updated>
    
    <content type="html"><![CDATA[<h2 id="oh-my-zsh中git快捷对照表"><a href="#oh-my-zsh中git快捷对照表" class="headerlink" title="oh-my-zsh中git快捷对照表"></a>oh-my-zsh中git快捷对照表</h2><a id="more"></a><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br></pre></td><td class="code"><pre><span class="line">alias g=&apos;git&apos;</span><br><span class="line"> </span><br><span class="line">alias ga=&apos;git add&apos;</span><br><span class="line">alias gaa=&apos;git add --all&apos;</span><br><span class="line">alias gapa=&apos;git add --patch&apos;</span><br><span class="line">alias gau=&apos;git add --update&apos;</span><br><span class="line">alias gap=&apos;git apply&apos;</span><br><span class="line"></span><br><span class="line">alias gb=&apos;git branch&apos;</span><br><span class="line">alias gba=&apos;git branch -a&apos;</span><br><span class="line">alias gbd=&apos;git branch -d&apos;</span><br><span class="line">alias gbda=&apos;git branch --no-color --merged | command grep -vE &quot;^(\*|\s*(master|develop|dev)\s*$)&quot; | command xargs -n 1 git branch -d&apos;</span><br><span class="line">alias gbl=&apos;git blame -b -w&apos;</span><br><span class="line">alias gbnm=&apos;git branch --no-merged&apos;</span><br><span class="line">alias gbr=&apos;git branch --remote&apos;</span><br><span class="line">alias gbs=&apos;git bisect&apos;</span><br><span class="line">alias gbsb=&apos;git bisect bad&apos;</span><br><span class="line">alias gbsg=&apos;git bisect good&apos;</span><br><span class="line">alias gbsr=&apos;git bisect reset&apos;</span><br><span class="line">alias gbss=&apos;git bisect start&apos;</span><br><span class="line"></span><br><span class="line">alias gc=&apos;git commit -v&apos;</span><br><span class="line">alias gc!=&apos;git commit -v --amend&apos;</span><br><span class="line">alias gcn!=&apos;git commit -v --no-edit --amend&apos;</span><br><span class="line">alias gca=&apos;git commit -v -a&apos;</span><br><span class="line">alias gca!=&apos;git commit -v -a --amend&apos;</span><br><span class="line">alias gcan!=&apos;git commit -v -a --no-edit --amend&apos;</span><br><span class="line">alias gcans!=&apos;git commit -v -a -s --no-edit --amend&apos;</span><br><span class="line">alias gcam=&apos;git commit -a -m&apos;</span><br><span class="line">alias gcsm=&apos;git commit -s -m&apos;</span><br><span class="line">alias gcb=&apos;git checkout -b&apos;</span><br><span class="line">alias gcf=&apos;git config --list&apos;</span><br><span class="line">alias gcl=&apos;git clone --recursive&apos;</span><br><span class="line">alias gclean=&apos;git clean -fd&apos;</span><br><span class="line">alias gpristine=&apos;git reset --hard &amp;&amp; git clean -dfx&apos;</span><br><span class="line">alias gcm=&apos;git checkout master&apos;</span><br><span class="line">alias gcd=&apos;git checkout develop&apos;</span><br><span class="line">alias gcmsg=&apos;git commit -m&apos;</span><br><span class="line">alias gco=&apos;git checkout&apos;</span><br><span class="line">alias gcount=&apos;git shortlog -sn&apos;</span><br><span class="line">compdef _git gcount</span><br><span class="line">alias gcp=&apos;git cherry-pick&apos;</span><br><span class="line">alias gcpa=&apos;git cherry-pick --abort&apos;</span><br><span class="line">alias gcpc=&apos;git cherry-pick --continue&apos;</span><br><span class="line">alias gcs=&apos;git commit -S&apos;</span><br><span class="line"></span><br><span class="line">alias gd=&apos;git diff&apos;</span><br><span class="line">alias gdca=&apos;git diff --cached&apos;</span><br><span class="line">alias gdcw=&apos;git diff --cached --word-diff&apos;</span><br><span class="line">alias gdct=&apos;git describe --tags `git rev-list --tags --max-count=1`&apos;</span><br><span class="line">alias gdt=&apos;git diff-tree --no-commit-id --name-only -r&apos;</span><br><span class="line">alias gdw=&apos;git diff --word-diff&apos;</span><br><span class="line"></span><br><span class="line">alias gf=&apos;git fetch&apos;</span><br><span class="line">alias gfa=&apos;git fetch --all --prune&apos;</span><br><span class="line">alias gfo=&apos;git fetch origin&apos;</span><br><span class="line"></span><br><span class="line">alias gg=&apos;git gui citool&apos;</span><br><span class="line">alias gga=&apos;git gui citool --amend&apos;</span><br><span class="line"></span><br><span class="line">alias ggpur=&apos;ggu&apos;</span><br><span class="line"></span><br><span class="line">alias ggpull=&apos;git pull origin $(git_current_branch)&apos;</span><br><span class="line"></span><br><span class="line">alias ggpush=&apos;git push origin $(git_current_branch)&apos;</span><br><span class="line"></span><br><span class="line">alias ggsup=&apos;git branch --set-upstream-to=origin/$(git_current_branch)&apos;</span><br><span class="line">alias gpsup=&apos;git push --set-upstream origin $(git_current_branch)&apos;</span><br><span class="line"></span><br><span class="line">alias ghh=&apos;git help&apos;</span><br><span class="line"></span><br><span class="line">alias gignore=&apos;git update-index --assume-unchanged&apos;</span><br><span class="line">alias gignored=&apos;git ls-files -v | grep &quot;^[[:lower:]]&quot;&apos;</span><br><span class="line">alias git-svn-dcommit-push=&apos;git svn dcommit &amp;&amp; git push github master:svntrunk&apos;</span><br><span class="line"></span><br><span class="line">alias gk=&apos;\gitk --all --branches&apos;</span><br><span class="line">alias gke=&apos;\gitk --all $(git log -g --pretty=%h)&apos;</span><br><span class="line"></span><br><span class="line">alias gl=&apos;git pull&apos;</span><br><span class="line">alias glg=&apos;git log --stat&apos;</span><br><span class="line">alias glgp=&apos;git log --stat -p&apos;</span><br><span class="line">alias glgg=&apos;git log --graph&apos;</span><br><span class="line">alias glgga=&apos;git log --graph --decorate --all&apos;</span><br><span class="line">alias glgm=&apos;git log --graph --max-count=10&apos;</span><br><span class="line">alias glo=&apos;git log --oneline --decorate&apos;</span><br><span class="line">alias glol=&quot;git log --graph --pretty=&apos;%Cred%h%Creset -%C(yellow)%d%Creset %s %Cgreen(%cr) %C(bold blue)&lt;%an&gt;%Creset&apos;&quot;</span><br><span class="line">alias glod=&quot;git log --graph --pretty=&apos;%Cred%h%Creset -%C(yellow)%d%Creset %s %Cgreen(%ad) %C(bold blue)&lt;%an&gt;%Creset&apos;&quot;</span><br><span class="line">alias glods=&quot;git log --graph --pretty=&apos;%Cred%h%Creset -%C(yellow)%d%Creset %s %Cgreen(%ad) %C(bold blue)&lt;%an&gt;%Creset&apos; --date=short&quot;</span><br><span class="line">alias glola=&quot;git log --graph --pretty=&apos;%Cred%h%Creset -%C(yellow)%d%Creset %s %Cgreen(%cr) %C(bold blue)&lt;%an&gt;%Creset&apos; --all&quot;</span><br><span class="line">alias glog=&apos;git log --oneline --decorate --graph&apos;</span><br><span class="line">alias gloga=&apos;git log --oneline --decorate --graph --all&apos;</span><br><span class="line">alias glp=&quot;_git_log_prettily&quot;</span><br><span class="line">compdef _git glp=git-log</span><br><span class="line"></span><br><span class="line">alias gm=&apos;git merge&apos;</span><br><span class="line">alias gmom=&apos;git merge origin/master&apos;</span><br><span class="line">alias gmt=&apos;git mergetool --no-prompt&apos;</span><br><span class="line">alias gmtvim=&apos;git mergetool --no-prompt --tool=vimdiff&apos;</span><br><span class="line">alias gmum=&apos;git merge upstream/master&apos;</span><br><span class="line">alias gma=&apos;git merge --abort&apos;</span><br><span class="line"></span><br><span class="line">alias gp=&apos;git push&apos;</span><br><span class="line">alias gpd=&apos;git push --dry-run&apos;</span><br><span class="line">alias gpoat=&apos;git push origin --all &amp;&amp; git push origin --tags&apos;</span><br><span class="line">compdef _git gpoat=git-push</span><br><span class="line">alias gpu=&apos;git push upstream&apos;</span><br><span class="line">alias gpv=&apos;git push -v&apos;</span><br><span class="line"></span><br><span class="line">alias gr=&apos;git remote&apos;</span><br><span class="line">alias gra=&apos;git remote add&apos;</span><br><span class="line">alias grb=&apos;git rebase&apos;</span><br><span class="line">alias grba=&apos;git rebase --abort&apos;</span><br><span class="line">alias grbc=&apos;git rebase --continue&apos;</span><br><span class="line">alias grbd=&apos;git rebase develop&apos;</span><br><span class="line">alias grbi=&apos;git rebase -i&apos;</span><br><span class="line">alias grbm=&apos;git rebase master&apos;</span><br><span class="line">alias grbs=&apos;git rebase --skip&apos;</span><br><span class="line">alias grh=&apos;git reset&apos;</span><br><span class="line">alias grhh=&apos;git reset --hard&apos;</span><br><span class="line">alias grmv=&apos;git remote rename&apos;</span><br><span class="line">alias grrm=&apos;git remote remove&apos;</span><br><span class="line">alias grset=&apos;git remote set-url&apos;</span><br><span class="line">alias grt=&apos;cd $(git rev-parse --show-toplevel || echo &quot;.&quot;)&apos;</span><br><span class="line">alias gru=&apos;git reset --&apos;</span><br><span class="line">alias grup=&apos;git remote update&apos;</span><br><span class="line">alias grv=&apos;git remote -v&apos;</span><br><span class="line"></span><br><span class="line">alias gsb=&apos;git status -sb&apos;</span><br><span class="line">alias gsd=&apos;git svn dcommit&apos;</span><br><span class="line">alias gsi=&apos;git submodule init&apos;</span><br><span class="line">alias gsps=&apos;git show --pretty=short --show-signature&apos;</span><br><span class="line">alias gsr=&apos;git svn rebase&apos;</span><br><span class="line">alias gss=&apos;git status -s&apos;</span><br><span class="line">alias gst=&apos;git status&apos;</span><br><span class="line">alias gsta=&apos;git stash save&apos;</span><br><span class="line">alias gstaa=&apos;git stash apply&apos;</span><br><span class="line">alias gstc=&apos;git stash clear&apos;</span><br><span class="line">alias gstd=&apos;git stash drop&apos;</span><br><span class="line">alias gstl=&apos;git stash list&apos;</span><br><span class="line">alias gstp=&apos;git stash pop&apos;</span><br><span class="line">alias gsts=&apos;git stash show --text&apos;</span><br><span class="line">alias gsu=&apos;git submodule update&apos;</span><br><span class="line"></span><br><span class="line">alias gts=&apos;git tag -s&apos;</span><br><span class="line">alias gtv=&apos;git tag | sort -V&apos;</span><br><span class="line"></span><br><span class="line">alias gunignore=&apos;git update-index --no-assume-unchanged&apos;</span><br><span class="line">alias gunwip=&apos;git log -n 1 | grep -q -c &quot;\-\-wip\-\-&quot; &amp;&amp; git reset HEAD~1&apos;</span><br><span class="line">alias gup=&apos;git pull --rebase&apos;</span><br><span class="line">alias gupv=&apos;git pull --rebase -v&apos;</span><br><span class="line">alias glum=&apos;git pull upstream master&apos;</span><br><span class="line"></span><br><span class="line">alias gwch=&apos;git whatchanged -p --abbrev-commit --pretty=medium&apos;</span><br><span class="line">alias gwip=&apos;git add -A; git rm $(git ls-files --deleted) 2&gt; /dev/null; git commit --no-verify -m &quot;--wip-- [skip ci]&quot;&apos;</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      &lt;h2 id=&quot;oh-my-zsh中git快捷对照表&quot;&gt;&lt;a href=&quot;#oh-my-zsh中git快捷对照表&quot; class=&quot;headerlink&quot; title=&quot;oh-my-zsh中git快捷对照表&quot;&gt;&lt;/a&gt;oh-my-zsh中git快捷对照表&lt;/h2&gt;
    
    </summary>
    
    
      <category term="Tool" scheme="https://www.meaoo.cn/categories/Tool/"/>
    
    
      <category term="Tool" scheme="https://www.meaoo.cn/tags/Tool/"/>
    
  </entry>
  
  <entry>
    <title>十渡-团建</title>
    <link href="https://www.meaoo.cn/2019/09/01/20190901001.html"/>
    <id>https://www.meaoo.cn/2019/09/01/20190901001.html</id>
    <published>2019-08-31T16:00:00.000Z</published>
    <updated>2021-01-26T03:20:44.969Z</updated>
    
    <content type="html"><![CDATA[<blockquote><p>时间：2019年9月1日<br>地点：十渡</p></blockquote><p><img src="https://raw.githubusercontent.com/meaoo/blog_img/master/2019/09/01/001.jpg" alt></p><a id="more"></a><p><img src="https://raw.githubusercontent.com/meaoo/blog_img/master/2019/09/01/002.jpg" alt><br><img src="https://raw.githubusercontent.com/meaoo/blog_img/master/2019/09/01/003.jpg" alt><br><img src="https://raw.githubusercontent.com/meaoo/blog_img/master/2019/09/01/004.jpg" alt><br><img src="https://raw.githubusercontent.com/meaoo/blog_img/master/2019/09/01/005.jpg" alt><br><img src="https://raw.githubusercontent.com/meaoo/blog_img/master/2019/09/01/006.jpg" alt><br><img src="https://raw.githubusercontent.com/meaoo/blog_img/master/2019/09/01/007.jpg" alt><br><img src="https://raw.githubusercontent.com/meaoo/blog_img/master/2019/09/01/008.jpg" alt></p>]]></content>
    
    <summary type="html">
    
      &lt;blockquote&gt;
&lt;p&gt;时间：2019年9月1日&lt;br&gt;地点：十渡&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;&lt;img src=&quot;https://raw.githubusercontent.com/meaoo/blog_img/master/2019/09/01/001.jpg&quot; alt&gt;&lt;/p&gt;
    
    </summary>
    
    
      <category term="Travel" scheme="https://www.meaoo.cn/categories/Travel/"/>
    
    
      <category term="Travel" scheme="https://www.meaoo.cn/tags/Travel/"/>
    
  </entry>
  
  <entry>
    <title>Mac OS 设置Git补全</title>
    <link href="https://www.meaoo.cn/2018/10/31/20181031001.html"/>
    <id>https://www.meaoo.cn/2018/10/31/20181031001.html</id>
    <published>2018-10-30T16:00:00.000Z</published>
    <updated>2019-09-30T04:51:40.000Z</updated>
    
    <content type="html"><![CDATA[<blockquote><p>最近遇到一个操作不是很爽的事情，在Mac OS上，使用Git竟然没有补全，对于我这记性不好的人来说，简直就是噩梦。所以下面介绍如何在Mac上让在使用Git的时候，按tab有补全。</p></blockquote><h1 id="工具"><a href="#工具" class="headerlink" title="工具"></a>工具</h1><ol><li>brew，不要问我brew是啥，这玩意儿类似于CentOS上的yum，到<span class="exturl" data-url="aHR0cHM6Ly9icmV3LnNoLw==" title="https://brew.sh/">brew官网<i class="fa fa-external-link"></i></span>进行下载安装，官网有多种语言，包括中文，不要告诉我你看不懂中文。</li><li>Git，这里说的Git是客户端，到<span class="exturl" data-url="aHR0cHM6Ly9naXQtc2NtLmNvbS8=" title="https://git-scm.com/">Git客户端<i class="fa fa-external-link"></i></span>进行下载。<a id="more"></a></li></ol><h1 id="正式开始"><a href="#正式开始" class="headerlink" title="正式开始"></a>正式开始</h1><h2 id="安装bash-completion"><a href="#安装bash-completion" class="headerlink" title="安装bash-completion"></a>安装<code>bash-completion</code></h2><ol><li>查看自己是否安装过<code>bash-completion</code> 在终端输入<code>$ brew list</code>如果列出的有<code>bash-completion</code>就不需要进行安装了,如果没有，就老老实实继续安装。</li><li><code>$ brew install bash-completion</code>进行安装，过程可能会比较慢，耐心等待。</li><li>安装完成之后查看<code>$ find ~/.bash_profiled</code>，如果有，就OK，如果没有就创建一个<code>$ mkfile -n 0 ~/.bash_profiled</code>。</li><li><code>bash-completion</code>的事情现在告一段落。</li></ol><h2 id="配置Git"><a href="#配置Git" class="headerlink" title="配置Git"></a>配置Git</h2><ol><li>操作下面步骤前，请先确保自己的Git可用，如果不可用，直接进行<span class="exturl" data-url="aHR0cHM6Ly9naXRodWIuY29tL2dpdC9naXQuZ2l0" title="https://github.com/git/git.git">下载<i class="fa fa-external-link"></i></span>，如果有，就<code>$ git clone https://github.com/git/git.git</code>。</li><li>等代码下载或Clone好之后，进入下载的文件目录<code>contrib/completion</code> 或 <code>$ cd ./git/contrib/completion</code>。</li><li>进入目录后将<code>git-completion.bash</code>拷贝到你的账号Home目录下，然后将文件重命名为<code>.git-completion.bash</code>或者输入命令进行拷贝并重命名<code>$ cp git-completion.bash ~/.git-completion.bash</code>。</li><li>查看是否在Home目录下是否有<code>.bashrc</code>文件，或者执行命令<code>$ find ~/.bashrc</code>进行查找，如果没有创建<code>$ mkfile -n 0 ~/.bashrc</code>。</li><li>在<code>.bashrc</code>文件中，添加内容<code>source ~/.git-completion.bash</code>，保存。</li><li>终端执行<code>$ source ~/.git-completion.bash</code>，必须执行，否则不会起作用</li><li>在<code>.bash_profile</code>文件中，添加内容</li></ol><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">if [ -f ~/.git-completion.bash ]; then</span><br><span class="line">   . ~/.git-completion.bash</span><br><span class="line">fi</span><br></pre></td></tr></table></figure><h1 id="完成"><a href="#完成" class="headerlink" title="完成"></a>完成</h1><p>关闭所有终端，再打开，试试看是不是有Git的补全了。</p><h1 id="结束"><a href="#结束" class="headerlink" title="结束"></a>结束</h1><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">E-mail：blog<span class="meta">@meaoo</span>.cn</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      &lt;blockquote&gt;
&lt;p&gt;最近遇到一个操作不是很爽的事情，在Mac OS上，使用Git竟然没有补全，对于我这记性不好的人来说，简直就是噩梦。所以下面介绍如何在Mac上让在使用Git的时候，按tab有补全。&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h1 id=&quot;工具&quot;&gt;&lt;a href=&quot;#工具&quot; class=&quot;headerlink&quot; title=&quot;工具&quot;&gt;&lt;/a&gt;工具&lt;/h1&gt;&lt;ol&gt;
&lt;li&gt;brew，不要问我brew是啥，这玩意儿类似于CentOS上的yum，到&lt;span class=&quot;exturl&quot; data-url=&quot;aHR0cHM6Ly9icmV3LnNoLw==&quot; title=&quot;https://brew.sh/&quot;&gt;brew官网&lt;i class=&quot;fa fa-external-link&quot;&gt;&lt;/i&gt;&lt;/span&gt;进行下载安装，官网有多种语言，包括中文，不要告诉我你看不懂中文。&lt;/li&gt;
&lt;li&gt;Git，这里说的Git是客户端，到&lt;span class=&quot;exturl&quot; data-url=&quot;aHR0cHM6Ly9naXQtc2NtLmNvbS8=&quot; title=&quot;https://git-scm.com/&quot;&gt;Git客户端&lt;i class=&quot;fa fa-external-link&quot;&gt;&lt;/i&gt;&lt;/span&gt;进行下载。
    
    </summary>
    
    
      <category term="Tool" scheme="https://www.meaoo.cn/categories/Tool/"/>
    
    
      <category term="Tool" scheme="https://www.meaoo.cn/tags/Tool/"/>
    
  </entry>
  
  <entry>
    <title>甲板遛弯儿</title>
    <link href="https://www.meaoo.cn/2018/10/10/20181010002.html"/>
    <id>https://www.meaoo.cn/2018/10/10/20181010002.html</id>
    <published>2018-10-09T16:00:00.000Z</published>
    <updated>2021-01-26T03:20:44.965Z</updated>
    
    <content type="html"><![CDATA[<video src="https://raw.githubusercontent.com/meaoo/blog_img/master/video/20181012002.mp4" preload="metadata" controls playsinline poster>Sorry, your browser does not support the video tag.</video>]]></content>
    
    <summary type="html">
    
      
      
        &lt;video src=&quot;https://raw.githubusercontent.com/meaoo/blog_img/master/video/20181012002.mp4&quot; preload=&quot;metadata&quot; controls playsinline poster&gt;So
      
    
    </summary>
    
    
      <category term="Travel" scheme="https://www.meaoo.cn/categories/Travel/"/>
    
    
      <category term="Travel" scheme="https://www.meaoo.cn/tags/Travel/"/>
    
      <category term="Video" scheme="https://www.meaoo.cn/tags/Video/"/>
    
  </entry>
  
  <entry>
    <title>人山人海</title>
    <link href="https://www.meaoo.cn/2018/10/10/20181010004.html"/>
    <id>https://www.meaoo.cn/2018/10/10/20181010004.html</id>
    <published>2018-10-09T16:00:00.000Z</published>
    <updated>2021-01-26T03:20:44.991Z</updated>
    
    <content type="html"><![CDATA[<video src="https://raw.githubusercontent.com/meaoo/blog_img/master/video/20181012004.mp4" preload="metadata" controls playsinline poster>Sorry, your browser does not support the video tag.</video>]]></content>
    
    <summary type="html">
    
      
      
        &lt;video src=&quot;https://raw.githubusercontent.com/meaoo/blog_img/master/video/20181012004.mp4&quot; preload=&quot;metadata&quot; controls playsinline poster&gt;So
      
    
    </summary>
    
    
      <category term="Travel" scheme="https://www.meaoo.cn/categories/Travel/"/>
    
    
      <category term="Travel" scheme="https://www.meaoo.cn/tags/Travel/"/>
    
      <category term="Video" scheme="https://www.meaoo.cn/tags/Video/"/>
    
  </entry>
  
  <entry>
    <title>船头漫步</title>
    <link href="https://www.meaoo.cn/2018/10/10/20181010005.html"/>
    <id>https://www.meaoo.cn/2018/10/10/20181010005.html</id>
    <published>2018-10-09T16:00:00.000Z</published>
    <updated>2021-01-26T03:20:45.007Z</updated>
    
    <content type="html"><![CDATA[<video src="https://raw.githubusercontent.com/meaoo/blog_img/master/video/20181012005.mp4" preload="metadata" controls playsinline poster>Sorry, your browser does not support the video tag.</video>]]></content>
    
    <summary type="html">
    
      
      
        &lt;video src=&quot;https://raw.githubusercontent.com/meaoo/blog_img/master/video/20181012005.mp4&quot; preload=&quot;metadata&quot; controls playsinline poster&gt;So
      
    
    </summary>
    
    
      <category term="Travel" scheme="https://www.meaoo.cn/categories/Travel/"/>
    
    
      <category term="Travel" scheme="https://www.meaoo.cn/tags/Travel/"/>
    
      <category term="Video" scheme="https://www.meaoo.cn/tags/Video/"/>
    
  </entry>
  
  <entry>
    <title>黄海日落</title>
    <link href="https://www.meaoo.cn/2018/10/10/20181010003.html"/>
    <id>https://www.meaoo.cn/2018/10/10/20181010003.html</id>
    <published>2018-10-09T16:00:00.000Z</published>
    <updated>2021-01-26T03:20:45.034Z</updated>
    
    <content type="html"><![CDATA[<video src="https://raw.githubusercontent.com/meaoo/blog_img/master/video/20181012003.mp4" preload="metadata" controls playsinline poster>Sorry, your browser does not support the video tag.</video>]]></content>
    
    <summary type="html">
    
      
      
        &lt;video src=&quot;https://raw.githubusercontent.com/meaoo/blog_img/master/video/20181012003.mp4&quot; preload=&quot;metadata&quot; controls playsinline poster&gt;So
      
    
    </summary>
    
    
      <category term="Travel" scheme="https://www.meaoo.cn/categories/Travel/"/>
    
    
      <category term="Travel" scheme="https://www.meaoo.cn/tags/Travel/"/>
    
      <category term="Video" scheme="https://www.meaoo.cn/tags/Video/"/>
    
  </entry>
  
  <entry>
    <title>解决Kanboard修改富文本编辑器遗留问题</title>
    <link href="https://www.meaoo.cn/2018/09/03/20180903001.html"/>
    <id>https://www.meaoo.cn/2018/09/03/20180903001.html</id>
    <published>2018-09-02T16:00:00.000Z</published>
    <updated>2020-03-09T14:21:57.959Z</updated>
    
    <content type="html"><![CDATA[<blockquote><p>之前一篇文章介绍了对Kanboard系统的添加任务时的文本编辑器进行改进。前面留下了一个问题，那就是由于使用Base64对图片进行直接存储，这就导致数据库字段需要一个很大的空间进行存储，最关键的是，对数据库会造成不必要的压力。点击这个，到<a href="https://www.meaoo.cn/2018/08/17/20180817001.html">Kanboard修改富文本编辑器</a>文章</p></blockquote><h1 id="解决问题"><a href="#解决问题" class="headerlink" title="解决问题"></a>解决问题</h1><p>  其实问题解决办法很简单，就是直接将富文本编辑器的图片上传到七牛即可。</p><h2 id="富文本编辑器的配置"><a href="#富文本编辑器的配置" class="headerlink" title="富文本编辑器的配置"></a>富文本编辑器的配置</h2><p>  前文中介绍到，我使用的是<span class="exturl" data-url="aHR0cDovL3d3dy53YW5nZWRpdG9yLmNvbS8=" title="http://www.wangeditor.com/">wangEditor<i class="fa fa-external-link"></i></span>,所以我们来研究一下<span class="exturl" data-url="aHR0cHM6Ly93d3cua2FuY2xvdWQuY24vd2FuZ2Z1cGVuZy93YW5nZWRpdG9yMy8zMzI1OTk=" title="https://www.kancloud.cn/wangfupeng/wangeditor3/332599">WangEditor的官方文档<i class="fa fa-external-link"></i></span>，这个官方文档介绍的还是比较详细的，仔细看看基本没有问题，下面我们看一下<span class="exturl" data-url="aHR0cHM6Ly93d3cua2FuY2xvdWQuY24vd2FuZ2Z1cGVuZy93YW5nZWRpdG9yMy8zMzU3ODI=" title="https://www.kancloud.cn/wangfupeng/wangeditor3/335782">图片上传<i class="fa fa-external-link"></i></span>的文档,我使用的是上传图片到服务器，不要问我为什么，因为我懒，我怕了在Kanboard中修改js，当然WangEditor官方也提供了直接上传七牛的方法，因为我懒的原因，我选择将图片上传到服务器再进行处理。</p><h3 id="富文本编辑器的配置文件"><a href="#富文本编辑器的配置文件" class="headerlink" title="富文本编辑器的配置文件"></a>富文本编辑器的配置文件</h3>  <figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br></pre></td><td class="code"><pre><span class="line">KB.component(<span class="string">'wang-edit'</span>, <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line"> </span><br><span class="line">     <span class="keyword">this</span>.render = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">         <span class="keyword">var</span> E = <span class="built_in">window</span>.wangEditor</span><br><span class="line">         <span class="keyword">var</span> editor = <span class="keyword">new</span> E(<span class="string">'#wang-editor'</span>);</span><br><span class="line"> </span><br><span class="line">         editor.customConfig.menus = [</span><br><span class="line">             <span class="string">'head'</span>,  <span class="comment">// 标题</span></span><br><span class="line">             <span class="string">'bold'</span>,  <span class="comment">// 粗体</span></span><br><span class="line">             <span class="string">'fontSize'</span>,  <span class="comment">// 字号</span></span><br><span class="line">             <span class="string">'fontName'</span>,  <span class="comment">// 字体</span></span><br><span class="line">             <span class="string">'italic'</span>,  <span class="comment">// 斜体</span></span><br><span class="line">             <span class="string">'underline'</span>,  <span class="comment">// 下划线</span></span><br><span class="line">             <span class="string">'strikeThrough'</span>,  <span class="comment">// 删除线</span></span><br><span class="line">             <span class="string">'foreColor'</span>,  <span class="comment">// 文字颜色</span></span><br><span class="line">             <span class="string">'link'</span>,  <span class="comment">// 插入链接</span></span><br><span class="line">             <span class="string">'list'</span>,  <span class="comment">// 列表</span></span><br><span class="line">             <span class="string">'justify'</span>,  <span class="comment">// 对齐方式</span></span><br><span class="line">             <span class="string">'quote'</span>,  <span class="comment">// 引用</span></span><br><span class="line">             <span class="string">'image'</span>,  <span class="comment">// 插入图片</span></span><br><span class="line">             <span class="string">'table'</span>  <span class="comment">// 表格</span></span><br><span class="line">         ]</span><br><span class="line">         <span class="comment">// editor.customConfig.uploadImgShowBase64 = true</span></span><br><span class="line">         <span class="comment">// editor.customConfig.debug = true</span></span><br><span class="line">         </span><br><span class="line">         <span class="comment">//图片上传路由，这里我使用的是TaskCreationController进行的修改，路径这样写就可以了，</span></span><br><span class="line">         <span class="comment">//当然你也可以自行创建一个Controller，这都没问题</span></span><br><span class="line">         editor.customConfig.uploadImgServer = <span class="string">'?controller=TaskCreationController&amp;action=upload'</span></span><br><span class="line">         <span class="comment">//自定义fileName，也就是你php接收上传文件的名字</span></span><br><span class="line">         editor.customConfig.uploadFileName = <span class="string">'file'</span></span><br><span class="line">         <span class="comment">//超时设置，之前使用了默认的10秒，但是貌似总是会出现上传超时问题，这里设置成了60秒</span></span><br><span class="line">         editor.customConfig.uploadImgTimeout = <span class="number">60000</span></span><br><span class="line">         editor.customConfig.onchange = <span class="function"><span class="keyword">function</span> (<span class="params">html</span>) </span>&#123;</span><br><span class="line">             <span class="comment">// html 即变化之后的内容</span></span><br><span class="line">            $(<span class="string">"#description"</span>).val(html);</span><br><span class="line">         &#125;</span><br><span class="line"> </span><br><span class="line">         <span class="comment">//这个参数设置的是选择本地文件上传的时候，上传的数量，我试了几次，选择多个，我后台只拿到了随机的一个，所以我这里目前设置为1，后续有时间进行改进</span></span><br><span class="line">         editor.customConfig.uploadImgMaxLength = <span class="number">1</span></span><br><span class="line">         <span class="comment">//上传完成的图片插入到富文本编辑器中</span></span><br><span class="line">         editor.customConfig.uploadImgHooks = &#123;</span><br><span class="line">             customInsert: <span class="function"><span class="keyword">function</span> (<span class="params">insertImg, result, editor</span>) </span>&#123;</span><br><span class="line">                 <span class="keyword">var</span> url = result.url</span><br><span class="line">                 insertImg(url)</span><br><span class="line">             &#125;</span><br><span class="line">         &#125;</span><br><span class="line"> </span><br><span class="line">         editor.create();</span><br><span class="line">     &#125;;</span><br><span class="line"> &#125;);</span><br><span class="line"> </span><br><span class="line"> KB.on(<span class="string">'dom.ready'</span>, <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line"> </span><br><span class="line"> </span><br><span class="line"> &#125;);</span><br></pre></td></tr></table></figure>  <a id="more"></a><p>  将之前我们设置的<code>editor.customConfig.uploadImgShowBase64 = true</code>进行注释，我们不再用Base64进行图片保存了。因为之前那个版本着急上线，使用了这个不好的解决办法。<br>  这里的上传方法，我直接写到了<code>TaskCreationController</code>里面，当然你也可以自行创建一个Controller，这都没问题</p><h3 id="TaskCreationController的Upload上传方法修改"><a href="#TaskCreationController的Upload上传方法修改" class="headerlink" title="TaskCreationController的Upload上传方法修改"></a>TaskCreationController的Upload上传方法修改</h3>  <figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line"> <span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 添加任务富文本编辑器中上传图片到七牛</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">upload</span><span class="params">()</span></span>&#123;</span><br><span class="line"> </span><br><span class="line">    <span class="comment">//图片上传到临时目录中，由于在服务器上data目录已经有了读写权限，就继续使用data目录即可</span></span><br><span class="line">    <span class="keyword">if</span>(!is_dir(<span class="string">"data/files/upload"</span>))&#123;</span><br><span class="line">        mkdir(<span class="string">"data/files/upload"</span>);</span><br><span class="line">    &#125;</span><br><span class="line"> </span><br><span class="line">    <span class="keyword">if</span> ($_FILES[<span class="string">"file"</span>][<span class="string">"error"</span>] &gt; <span class="number">0</span>)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">echo</span> <span class="string">"Error: "</span> . $_FILES[<span class="string">"file"</span>][<span class="string">"error"</span>] . <span class="string">"&lt;br /&gt;"</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="comment">//获取文件类型</span></span><br><span class="line">        $fileType = pathinfo($_FILES[<span class="string">"file"</span>][<span class="string">"name"</span>])[<span class="string">'extension'</span>];</span><br><span class="line">        <span class="comment">//拼接文件名</span></span><br><span class="line">        $fileName = time().mt_rand(<span class="number">1000</span>,<span class="number">9999</span>).mt_rand(<span class="number">100</span>,<span class="number">999</span>).<span class="string">"."</span>.$fileType;</span><br><span class="line"> </span><br><span class="line">        <span class="comment">//移动缓存目录中的文件到data目录中，</span></span><br><span class="line">        move_uploaded_file($_FILES[<span class="string">"file"</span>][<span class="string">"tmp_name"</span>], <span class="string">"data/files/upload/"</span> . $fileName);</span><br><span class="line">        $filePath = <span class="string">"upload/"</span> . $fileName;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//uploadFileToQiNiu我自己又写了个小方法，方便使用</span></span><br><span class="line">    $uploadStatus = <span class="keyword">$this</span>-&gt;taskFileModel-&gt;uploadFileToQiNiu($filePath);</span><br><span class="line"> </span><br><span class="line">     <span class="comment">//配置路径，方便前台直接调用</span></span><br><span class="line">    $urlPath = QINIU_URL.$filePath;</span><br><span class="line"> </span><br><span class="line">     <span class="comment">//由于WangEditor的回传格式要求，只能这样写了。</span></span><br><span class="line">    <span class="keyword">if</span>($uploadStatus)&#123;</span><br><span class="line">        $arr[<span class="string">'errno'</span>] = <span class="number">0</span>;</span><br><span class="line">        $arr[<span class="string">'url'</span>]= $urlPath;</span><br><span class="line">        print_r(json_encode($arr));</span><br><span class="line">    &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">        $arr[<span class="string">'errno'</span>] = <span class="number">1</span>;</span><br><span class="line">        print_r(json_encode($arr));</span><br><span class="line">    &#125;</span><br><span class="line"> </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="uploadFileToQiNiu方法"><a href="#uploadFileToQiNiu方法" class="headerlink" title="uploadFileToQiNiu方法"></a>uploadFileToQiNiu方法</h3><p>  方法中的<code>QINIU_ACCESS</code>和<code>QINIU_SECRTE</code>都是在Kanboard配置文件中配置好的</p>  <figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"> <span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 上传图片到七牛</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> $filePath</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return</span> bool</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@throws</span> \Exception</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">uploadFileToQiNiu</span><span class="params">($filePath)</span></span>&#123;</span><br><span class="line"> </span><br><span class="line">    $auth = <span class="keyword">new</span> Auth(QINIU_ACCESS,QINIU_SECRTE);</span><br><span class="line">    $bucket = QINIU_BUCKET;</span><br><span class="line">    $policy = <span class="keyword">null</span>;</span><br><span class="line">    $upToken = $auth-&gt;uploadToken($bucket);</span><br><span class="line"> </span><br><span class="line">    <span class="comment">// 要上传文件的本地路径</span></span><br><span class="line">    <span class="comment">// 上传到七牛后保存的文件名</span></span><br><span class="line">    $key = $filePath;</span><br><span class="line">    $filePath = <span class="string">"data/files/"</span>.$filePath;</span><br><span class="line"> </span><br><span class="line">    <span class="comment">// 初始化 UploadManager 对象并进行文件的上传。</span></span><br><span class="line">    $uploadMgr = <span class="keyword">new</span> UploadManager();</span><br><span class="line">    <span class="comment">// 调用 UploadManager 的 putFile 方法进行文件的上传。</span></span><br><span class="line">    <span class="keyword">list</span>($ret, $err) = $uploadMgr-&gt;putFile($upToken,$key,$filePath);</span><br><span class="line">    <span class="keyword">if</span> ($err !== <span class="keyword">null</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="comment">//上传完成，删除本地服务器上的文件，不删也可以，看业务需求</span></span><br><span class="line">        unlink($filePath);</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">true</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="七牛SDK安装"><a href="#七牛SDK安装" class="headerlink" title="七牛SDK安装"></a>七牛SDK安装</h3><p>   七牛SDK安装，官方提供了两种方式进行安装</p><ol><li>到七牛官方GitHub进行安装,<span class="exturl" data-url="aHR0cHM6Ly9naXRodWIuY29tL3Fpbml1L3BocC1zZGsvcmVsZWFzZXM=" title="https://github.com/qiniu/php-sdk/releases">点击进入七牛官方GitHub托管SDK（PHP版本）<i class="fa fa-external-link"></i></span></li><li>使用Composer进行安装，<span class="exturl" data-url="aHR0cHM6Ly9wYWNrYWdpc3Qub3JnL3BhY2thZ2VzL3Fpbml1L3BocC1zZGs=" title="https://packagist.org/packages/qiniu/php-sdk">点击进入七牛官方Packagist官方地址<i class="fa fa-external-link"></i></span></li></ol><h3 id="注意"><a href="#注意" class="headerlink" title="注意"></a>注意</h3><p>  在使用Composer安装SDK之后，会出现整个站点报错，原因是Composer安装的时候将原有的<code>autoload.php</code>及其他几个文件代码覆盖掉了。这时候需要你的版本控制器来手动修复了</p><h3 id="完成"><a href="#完成" class="headerlink" title="完成"></a>完成</h3><p>  到这里，富文本编辑器上传图片问题就解决了。</p><h1 id="结束"><a href="#结束" class="headerlink" title="结束"></a>结束</h1><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">E-mail：blog<span class="meta">@meaoo</span>.cn</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      &lt;blockquote&gt;
&lt;p&gt;之前一篇文章介绍了对Kanboard系统的添加任务时的文本编辑器进行改进。前面留下了一个问题，那就是由于使用Base64对图片进行直接存储，这就导致数据库字段需要一个很大的空间进行存储，最关键的是，对数据库会造成不必要的压力。点击这个，到&lt;a href=&quot;https://www.meaoo.cn/2018/08/17/20180817001.html&quot;&gt;Kanboard修改富文本编辑器&lt;/a&gt;文章&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h1 id=&quot;解决问题&quot;&gt;&lt;a href=&quot;#解决问题&quot; class=&quot;headerlink&quot; title=&quot;解决问题&quot;&gt;&lt;/a&gt;解决问题&lt;/h1&gt;&lt;p&gt;  其实问题解决办法很简单，就是直接将富文本编辑器的图片上传到七牛即可。&lt;/p&gt;
&lt;h2 id=&quot;富文本编辑器的配置&quot;&gt;&lt;a href=&quot;#富文本编辑器的配置&quot; class=&quot;headerlink&quot; title=&quot;富文本编辑器的配置&quot;&gt;&lt;/a&gt;富文本编辑器的配置&lt;/h2&gt;&lt;p&gt;  前文中介绍到，我使用的是&lt;span class=&quot;exturl&quot; data-url=&quot;aHR0cDovL3d3dy53YW5nZWRpdG9yLmNvbS8=&quot; title=&quot;http://www.wangeditor.com/&quot;&gt;wangEditor&lt;i class=&quot;fa fa-external-link&quot;&gt;&lt;/i&gt;&lt;/span&gt;,所以我们来研究一下&lt;span class=&quot;exturl&quot; data-url=&quot;aHR0cHM6Ly93d3cua2FuY2xvdWQuY24vd2FuZ2Z1cGVuZy93YW5nZWRpdG9yMy8zMzI1OTk=&quot; title=&quot;https://www.kancloud.cn/wangfupeng/wangeditor3/332599&quot;&gt;WangEditor的官方文档&lt;i class=&quot;fa fa-external-link&quot;&gt;&lt;/i&gt;&lt;/span&gt;，这个官方文档介绍的还是比较详细的，仔细看看基本没有问题，下面我们看一下&lt;span class=&quot;exturl&quot; data-url=&quot;aHR0cHM6Ly93d3cua2FuY2xvdWQuY24vd2FuZ2Z1cGVuZy93YW5nZWRpdG9yMy8zMzU3ODI=&quot; title=&quot;https://www.kancloud.cn/wangfupeng/wangeditor3/335782&quot;&gt;图片上传&lt;i class=&quot;fa fa-external-link&quot;&gt;&lt;/i&gt;&lt;/span&gt;的文档,我使用的是上传图片到服务器，不要问我为什么，因为我懒，我怕了在Kanboard中修改js，当然WangEditor官方也提供了直接上传七牛的方法，因为我懒的原因，我选择将图片上传到服务器再进行处理。&lt;/p&gt;
&lt;h3 id=&quot;富文本编辑器的配置文件&quot;&gt;&lt;a href=&quot;#富文本编辑器的配置文件&quot; class=&quot;headerlink&quot; title=&quot;富文本编辑器的配置文件&quot;&gt;&lt;/a&gt;富文本编辑器的配置文件&lt;/h3&gt;  &lt;figure class=&quot;highlight javascript&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;17&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;18&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;19&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;20&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;21&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;22&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;23&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;24&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;25&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;26&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;27&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;28&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;29&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;30&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;31&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;32&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;33&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;34&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;35&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;36&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;37&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;38&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;39&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;40&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;41&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;42&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;43&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;44&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;45&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;46&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;47&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;48&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;49&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;50&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;51&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;52&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;53&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;54&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;55&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;KB.component(&lt;span class=&quot;string&quot;&gt;&#39;wang-edit&#39;&lt;/span&gt;, &lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;function&lt;/span&gt; (&lt;span class=&quot;params&quot;&gt;&lt;/span&gt;) &lt;/span&gt;&amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;     &lt;span class=&quot;keyword&quot;&gt;this&lt;/span&gt;.render = &lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;function&lt;/span&gt; (&lt;span class=&quot;params&quot;&gt;&lt;/span&gt;) &lt;/span&gt;&amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;         &lt;span class=&quot;keyword&quot;&gt;var&lt;/span&gt; E = &lt;span class=&quot;built_in&quot;&gt;window&lt;/span&gt;.wangEditor&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;         &lt;span class=&quot;keyword&quot;&gt;var&lt;/span&gt; editor = &lt;span class=&quot;keyword&quot;&gt;new&lt;/span&gt; E(&lt;span class=&quot;string&quot;&gt;&#39;#wang-editor&#39;&lt;/span&gt;);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;         editor.customConfig.menus = [&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;             &lt;span class=&quot;string&quot;&gt;&#39;head&#39;&lt;/span&gt;,  &lt;span class=&quot;comment&quot;&gt;// 标题&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;             &lt;span class=&quot;string&quot;&gt;&#39;bold&#39;&lt;/span&gt;,  &lt;span class=&quot;comment&quot;&gt;// 粗体&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;             &lt;span class=&quot;string&quot;&gt;&#39;fontSize&#39;&lt;/span&gt;,  &lt;span class=&quot;comment&quot;&gt;// 字号&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;             &lt;span class=&quot;string&quot;&gt;&#39;fontName&#39;&lt;/span&gt;,  &lt;span class=&quot;comment&quot;&gt;// 字体&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;             &lt;span class=&quot;string&quot;&gt;&#39;italic&#39;&lt;/span&gt;,  &lt;span class=&quot;comment&quot;&gt;// 斜体&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;             &lt;span class=&quot;string&quot;&gt;&#39;underline&#39;&lt;/span&gt;,  &lt;span class=&quot;comment&quot;&gt;// 下划线&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;             &lt;span class=&quot;string&quot;&gt;&#39;strikeThrough&#39;&lt;/span&gt;,  &lt;span class=&quot;comment&quot;&gt;// 删除线&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;             &lt;span class=&quot;string&quot;&gt;&#39;foreColor&#39;&lt;/span&gt;,  &lt;span class=&quot;comment&quot;&gt;// 文字颜色&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;             &lt;span class=&quot;string&quot;&gt;&#39;link&#39;&lt;/span&gt;,  &lt;span class=&quot;comment&quot;&gt;// 插入链接&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;             &lt;span class=&quot;string&quot;&gt;&#39;list&#39;&lt;/span&gt;,  &lt;span class=&quot;comment&quot;&gt;// 列表&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;             &lt;span class=&quot;string&quot;&gt;&#39;justify&#39;&lt;/span&gt;,  &lt;span class=&quot;comment&quot;&gt;// 对齐方式&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;             &lt;span class=&quot;string&quot;&gt;&#39;quote&#39;&lt;/span&gt;,  &lt;span class=&quot;comment&quot;&gt;// 引用&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;             &lt;span class=&quot;string&quot;&gt;&#39;image&#39;&lt;/span&gt;,  &lt;span class=&quot;comment&quot;&gt;// 插入图片&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;             &lt;span class=&quot;string&quot;&gt;&#39;table&#39;&lt;/span&gt;  &lt;span class=&quot;comment&quot;&gt;// 表格&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;         ]&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;         &lt;span class=&quot;comment&quot;&gt;// editor.customConfig.uploadImgShowBase64 = true&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;         &lt;span class=&quot;comment&quot;&gt;// editor.customConfig.debug = true&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;         &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;         &lt;span class=&quot;comment&quot;&gt;//图片上传路由，这里我使用的是TaskCreationController进行的修改，路径这样写就可以了，&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;         &lt;span class=&quot;comment&quot;&gt;//当然你也可以自行创建一个Controller，这都没问题&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;         editor.customConfig.uploadImgServer = &lt;span class=&quot;string&quot;&gt;&#39;?controller=TaskCreationController&amp;amp;action=upload&#39;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;         &lt;span class=&quot;comment&quot;&gt;//自定义fileName，也就是你php接收上传文件的名字&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;         editor.customConfig.uploadFileName = &lt;span class=&quot;string&quot;&gt;&#39;file&#39;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;         &lt;span class=&quot;comment&quot;&gt;//超时设置，之前使用了默认的10秒，但是貌似总是会出现上传超时问题，这里设置成了60秒&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;         editor.customConfig.uploadImgTimeout = &lt;span class=&quot;number&quot;&gt;60000&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;         editor.customConfig.onchange = &lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;function&lt;/span&gt; (&lt;span class=&quot;params&quot;&gt;html&lt;/span&gt;) &lt;/span&gt;&amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;             &lt;span class=&quot;comment&quot;&gt;// html 即变化之后的内容&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            $(&lt;span class=&quot;string&quot;&gt;&quot;#description&quot;&lt;/span&gt;).val(html);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;         &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;         &lt;span class=&quot;comment&quot;&gt;//这个参数设置的是选择本地文件上传的时候，上传的数量，我试了几次，选择多个，我后台只拿到了随机的一个，所以我这里目前设置为1，后续有时间进行改进&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;         editor.customConfig.uploadImgMaxLength = &lt;span class=&quot;number&quot;&gt;1&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;         &lt;span class=&quot;comment&quot;&gt;//上传完成的图片插入到富文本编辑器中&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;         editor.customConfig.uploadImgHooks = &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;             customInsert: &lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;function&lt;/span&gt; (&lt;span class=&quot;params&quot;&gt;insertImg, result, editor&lt;/span&gt;) &lt;/span&gt;&amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                 &lt;span class=&quot;keyword&quot;&gt;var&lt;/span&gt; url = result.url&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                 insertImg(url)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;             &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;         &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;         editor.create();&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;     &amp;#125;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; &amp;#125;);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; KB.on(&lt;span class=&quot;string&quot;&gt;&#39;dom.ready&#39;&lt;/span&gt;, &lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;function&lt;/span&gt; (&lt;span class=&quot;params&quot;&gt;&lt;/span&gt;) &lt;/span&gt;&amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; &amp;#125;);&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
    
    </summary>
    
    
      <category term="Kanboard" scheme="https://www.meaoo.cn/categories/Kanboard/"/>
    
    
      <category term="Coder" scheme="https://www.meaoo.cn/tags/Coder/"/>
    
      <category term="PHP" scheme="https://www.meaoo.cn/tags/PHP/"/>
    
      <category term="Kanboard" scheme="https://www.meaoo.cn/tags/Kanboard/"/>
    
  </entry>
  
  <entry>
    <title>Kanboard修改富文本编辑器</title>
    <link href="https://www.meaoo.cn/2018/08/17/20180817001.html"/>
    <id>https://www.meaoo.cn/2018/08/17/20180817001.html</id>
    <published>2018-08-16T16:00:00.000Z</published>
    <updated>2021-01-26T03:20:45.068Z</updated>
    
    <content type="html"><![CDATA[<blockquote><p>近期有这样的一个需求，需要把<span class="exturl" data-url="aHR0cHM6Ly9rYW5ib2FyZC5vcmcv" title="https://kanboard.org/">kanboard<i class="fa fa-external-link"></i></span>进行改进，需要在添加任务的时候，可以添加图片。由于<span class="exturl" data-url="aHR0cHM6Ly9rYW5ib2FyZC5vcmcv" title="https://kanboard.org/">kanboard<i class="fa fa-external-link"></i></span>使用的是markddown进行文本编辑，那么问题来了，怎样进行markddown的图片上传呢，解决方案是有的，比如简书，已经实现了markddown图片粘贴上传。但是呢，我是个比较懒的人，那么还有一个解决方案，使用富文本编辑器。下文介绍如何将kanboard中的markddown编辑器修改为富文本编辑器。</p></blockquote><h1 id="选材"><a href="#选材" class="headerlink" title="选材"></a>选材</h1><p>现今富文本编辑器已经有很多了，而且都很完善，那么选择哪个富文本编辑器的问题就来了。需求有两个：</p><h2 id="需求"><a href="#需求" class="headerlink" title="需求"></a>需求</h2><ol><li>可以直接粘贴图片到富文本编辑器</li><li>改动代码越少越好</li></ol><h2 id="入选"><a href="#入选" class="headerlink" title="入选"></a>入选</h2><p>经过一系列的筛选，现在有两个富文本编辑器入选</p><ol><li><span class="exturl" data-url="aHR0cDovL3VlZGl0b3IuYmFpZHUuY29t" title="http://ueditor.baidu.com">百度的UEditor<i class="fa fa-external-link"></i></span></li><li><span class="exturl" data-url="aHR0cDovL3d3dy53YW5nZWRpdG9yLmNvbS8=" title="http://www.wangeditor.com/">wangEditor<i class="fa fa-external-link"></i></span></li></ol><h2 id="选择"><a href="#选择" class="headerlink" title="选择"></a>选择</h2><p>由于百度UEditor已经在2016年的5月就不再维护，并且需要引入资源略多，虽说只有js资源和css资源，但是还是略多。<br>最后选择使用wangEditor富文本编辑器，为啥呢，因为只需要引入js文件即可。</p> <a id="more"></a><h1 id="改版"><a href="#改版" class="headerlink" title="改版"></a>改版</h1><p>选材已经搞完，那么就开始动工了。</p><h2 id="引入JS"><a href="#引入JS" class="headerlink" title="引入JS"></a>引入JS</h2><p>将wangEditor的JS文件，引入kanboard</p><ol><li>将JS粘贴到<code>assets/js</code>目录下</li><li>打开模板的<code>app/Template/layout.php</code>页面，在所有js资源加载的最后，引入wangEditor的js，如下图：<br><img src="https://raw.githubusercontent.com/meaoo/blog_img/master/2018/08/17/2.png" alt="页面引入JS"></li></ol><h2 id="错误解决"><a href="#错误解决" class="headerlink" title="错误解决"></a>错误解决</h2><p>之前引入JS之后，刷新一下页面试试，应该会报下面的错误，如下图：<br><img src="https://raw.githubusercontent.com/meaoo/blog_img/master/2018/08/17/1.png" alt="报错"><br>该错误是由于kanboard的<code>CSP</code>机制导致的，什么是CSP？<span class="exturl" data-url="aHR0cHM6Ly9yZXNlYXJjaC5nb29nbGUuY29tL3B1YnMvcHViNDU1NDIuaHRtbD9zcG09YTJjNGUuMTExNTM5NDAuYmxvZ2NvbnQ2MTE0NC45LjUwOTI3ZDc2aExTYmVEJmZyb209dGltZWxpbmUmaXNhcHBpbnN0YWxsZWQ9MA==" title="https://research.google.com/pubs/pub45542.html?spm=a2c4e.11153940.blogcont61144.9.50927d76hLSbeD&from=timeline&isappinstalled=0">点击查看什么是CSP<i class="fa fa-external-link"></i></span>。当然解决办法也很简单。</p><ol><li>找到kanboard中csp的配置，位置在<code>app/ServiceProvider/ClassProvider.php</code>中，找到最下面的<code>register</code>方法，将<code>cspRules</code>数组中的设置，改为下面的代码</li></ol><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">'default-src'</span> =&gt; <span class="string">"'self' 'unsafe-inline' 'unsafe-eval'"</span>,</span><br><span class="line"><span class="string">'style-src'</span> =&gt; <span class="string">"'self' 'unsafe-inline'"</span>,</span><br><span class="line"><span class="string">'script-src'</span> =&gt; <span class="string">"'self' 'unsafe-inline' 'unsafe-eval'"</span>,</span><br><span class="line"><span class="string">'font-src'</span> =&gt; <span class="string">'* data:'</span>,</span><br><span class="line"><span class="string">'img-src'</span> =&gt; <span class="string">'* data:'</span>,</span><br></pre></td></tr></table></figure><p>再次刷新，报错没有了。继续解决下面的问题。</p><h1 id="显示"><a href="#显示" class="headerlink" title="显示"></a>显示</h1><p>有人会问了，显示还不简单，直接复制进去就完事儿了。<br>其实吧，显示这个事情真的还是比较费劲的。请继续往下看。</p><h2 id="尝试"><a href="#尝试" class="headerlink" title="尝试"></a>尝试</h2><p>由于富文本编辑器需要使用JS进行渲染，那么首先要解决的就是，在添加任务的面板上，让kanboard执行js。是的，让面板执行js，因为kanboard不执行页面的js</p><ol><li>首先找到添加任务的面板位置，<code>app/Template/task_creation/show.php</code>文件。找到class为<code>task-form-main-column</code>的div，然后在里面随便添加点什么，看看是不是该面板。代码如下：</li></ol><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"task-form-main-column"</span>&gt;</span></span><br><span class="line"> <span class="php"><span class="meta">&lt;?</span>= <span class="keyword">$this</span>-&gt;task-&gt;renderTitleField($values, $errors) <span class="meta">?&gt;</span></span></span><br><span class="line"> <span class="php"><span class="meta">&lt;?</span>= <span class="keyword">$this</span>-&gt;task-&gt;renderDescriptionField($values, $errors) <span class="meta">?&gt;</span></span></span><br><span class="line"> <span class="php"><span class="meta">&lt;?</span>= <span class="keyword">$this</span>-&gt;task-&gt;renderDescriptionTemplateDropdown($project[<span class="string">'id'</span>]) <span class="meta">?&gt;</span></span></span><br><span class="line"> <span class="php"><span class="meta">&lt;?</span>= <span class="keyword">$this</span>-&gt;task-&gt;renderTagField($project) <span class="meta">?&gt;</span></span></span><br><span class="line"> <span class="tag">&lt;<span class="name">span</span>&gt;</span>测试<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line"> <span class="php"><span class="meta">&lt;?</span>= <span class="keyword">$this</span>-&gt;hook-&gt;render(<span class="string">'template:task:form:first-column'</span>, <span class="keyword">array</span>(<span class="string">'values'</span> =&gt; $values, <span class="string">'errors'</span> =&gt; $errors)) <span class="meta">?&gt;</span></span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure><p>其中，<code>&lt;span&gt;测试&lt;/span&gt;</code>是我自己添加的，显示效果如下图<br><img src="https://raw.githubusercontent.com/meaoo/blog_img/master/2018/08/17/3.png" alt="显示测试"></p><ol start="2"><li>下面添加js执行，看看是否执行了。添加代码如下</li></ol><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"task-form-main-column"</span>&gt;</span></span><br><span class="line">  <span class="php"><span class="meta">&lt;?</span>= <span class="keyword">$this</span>-&gt;task-&gt;renderTitleField($values, $errors) <span class="meta">?&gt;</span></span></span><br><span class="line">  <span class="php"><span class="meta">&lt;?</span>= <span class="keyword">$this</span>-&gt;task-&gt;renderDescriptionField($values, $errors) <span class="meta">?&gt;</span></span></span><br><span class="line">  <span class="php"><span class="meta">&lt;?</span>= <span class="keyword">$this</span>-&gt;task-&gt;renderDescriptionTemplateDropdown($project[<span class="string">'id'</span>]) <span class="meta">?&gt;</span></span></span><br><span class="line">  <span class="php"><span class="meta">&lt;?</span>= <span class="keyword">$this</span>-&gt;task-&gt;renderTagField($project) <span class="meta">?&gt;</span></span></span><br><span class="line">  <span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">"application/javascript"</span>&gt;</span></span><br><span class="line"><span class="javascript">     <span class="built_in">console</span>.log(<span class="string">'这是测试的输出'</span>);</span></span><br><span class="line"><span class="actionscript">     alert(<span class="string">'测试一个'</span>);</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">  <span class="php"><span class="meta">&lt;?</span>= <span class="keyword">$this</span>-&gt;hook-&gt;render(<span class="string">'template:task:form:first-column'</span>, <span class="keyword">array</span>(<span class="string">'values'</span> =&gt; $values, <span class="string">'errors'</span> =&gt; $errors)) <span class="meta">?&gt;</span></span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure><p>那么这样的执行结果如何？请看下图<br><img src="https://raw.githubusercontent.com/meaoo/blog_img/master/2018/08/17/4.png" alt="控制台"><br>空空如也的控制台输出，这说明了什么？kanboard压根就没有执行这段代码。是因为kanboard不执行吗？不是的，因为这是添加任务的面板是ajax调用出来的。证明是什么呢？如下代码：</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&lt;script type=<span class="string">"application/javascript"</span>&gt;</span><br><span class="line">     <span class="built_in">console</span>.log(<span class="string">'这是测试的输出'</span>);</span><br><span class="line">     alert(<span class="string">'测试一个'</span>);</span><br><span class="line">&lt;<span class="regexp">/script&gt;</span></span><br></pre></td></tr></table></figure><p>将这段代码复制到<code>app/Template/layout.php</code>中，也就是咱们前面添加wangEditor的下面，看看是否执行，如下图<br><img src="https://raw.githubusercontent.com/meaoo/blog_img/master/2018/08/17/5.png" alt="正常运行"></p><h2 id="解决"><a href="#解决" class="headerlink" title="解决"></a>解决</h2><p>根据上面的运行结果，得出结论，常规的JS加载是不可用的，那么我们能不能学学插件里的JS是怎么写的，插件的JS是如何加载的。如下图，日历组件的js加载<br><img src="https://raw.githubusercontent.com/meaoo/blog_img/master/2018/08/17/6.png" alt="日历组件加载"><br>可以看到，组件是通过<code>KB.component</code>进行的注册，然后再方法内的<code>this.render</code>中进行的方法调用。<br>根据上面的做法，我们需要自己写一个加载富文本编辑器的JS，并且我们需要直接粘贴图片，我现在又不希望再做一个图片上传的方法，那么，我们就可以将富文本编辑器的图片直接转成base64进行存储及显示，代码如下</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">KB.component(<span class="string">'wang-edit'</span>, <span class="function"><span class="keyword">function</span> <span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    this.render = <span class="function"><span class="keyword">function</span> <span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">var</span> E = window.wangEditor</span><br><span class="line">        <span class="keyword">var</span> editor = <span class="keyword">new</span> E(<span class="string">'#wang-editor'</span>);</span><br><span class="line"></span><br><span class="line">        editor.customConfig.menus = [</span><br><span class="line">            <span class="string">'head'</span>,  <span class="comment">// 标题</span></span><br><span class="line">            <span class="string">'bold'</span>,  <span class="comment">// 粗体</span></span><br><span class="line">            <span class="string">'fontSize'</span>,  <span class="comment">// 字号</span></span><br><span class="line">            <span class="string">'fontName'</span>,  <span class="comment">// 字体</span></span><br><span class="line">            <span class="string">'italic'</span>,  <span class="comment">// 斜体</span></span><br><span class="line">            <span class="string">'underline'</span>,  <span class="comment">// 下划线</span></span><br><span class="line">            <span class="string">'strikeThrough'</span>,  <span class="comment">// 删除线</span></span><br><span class="line">            <span class="string">'foreColor'</span>,  <span class="comment">// 文字颜色</span></span><br><span class="line">            <span class="string">'link'</span>,  <span class="comment">// 插入链接</span></span><br><span class="line">            <span class="string">'list'</span>,  <span class="comment">// 列表</span></span><br><span class="line">            <span class="string">'justify'</span>,  <span class="comment">// 对齐方式</span></span><br><span class="line">            <span class="string">'quote'</span>,  <span class="comment">// 引用</span></span><br><span class="line">            <span class="string">'image'</span>,  <span class="comment">// 插入图片</span></span><br><span class="line">            <span class="string">'table'</span>  <span class="comment">// 表格</span></span><br><span class="line">        ]</span><br><span class="line">        editor.customConfig.uploadImgShowBase64 = <span class="keyword">true</span></span><br><span class="line">        editor.create();</span><br><span class="line">    &#125;;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><p>注意，记住咱们的js注册名，<code>wang-edit</code>然后将这个JS引入，位置放到之前引入富文本编辑器下面。</p><h1 id="富文本编辑器显示"><a href="#富文本编辑器显示" class="headerlink" title="富文本编辑器显示"></a>富文本编辑器显示</h1><h2 id="富文本编辑器加载"><a href="#富文本编辑器加载" class="headerlink" title="富文本编辑器加载"></a>富文本编辑器加载</h2><p>文本编辑器加载，位置在<code>app/Template/task_creation/show.php</code>文件。找到class为<code>task-form-main-column</code>的div，代码如下：</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"task-form-main-column"</span>&gt;</span></span><br><span class="line"> <span class="php"><span class="meta">&lt;?</span>= <span class="keyword">$this</span>-&gt;task-&gt;renderTitleField($values, $errors) <span class="meta">?&gt;</span></span></span><br><span class="line"> <span class="php"><span class="meta">&lt;?</span>= <span class="keyword">$this</span>-&gt;task-&gt;renderDescriptionField($values, $errors) <span class="meta">?&gt;</span></span></span><br><span class="line"> <span class="php"><span class="meta">&lt;?</span>= <span class="keyword">$this</span>-&gt;task-&gt;renderDescriptionTemplateDropdown($project[<span class="string">'id'</span>]) <span class="meta">?&gt;</span></span></span><br><span class="line"> <span class="php"><span class="meta">&lt;?</span>= <span class="keyword">$this</span>-&gt;task-&gt;renderTagField($project) <span class="meta">?&gt;</span></span></span><br><span class="line"> <span class="php"><span class="meta">&lt;?</span>= <span class="keyword">$this</span>-&gt;hook-&gt;render(<span class="string">'template:task:form:first-column'</span>, <span class="keyword">array</span>(<span class="string">'values'</span> =&gt; $values, <span class="string">'errors'</span> =&gt; $errors)) <span class="meta">?&gt;</span></span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure><p>其中的<code>&lt;?= $this-&gt;task-&gt;renderDescriptionField($values, $errors) ?&gt;</code>是文本编辑器加载的地方.</p><ol><li>我们根据这个加载的方法，找到php中加载的地方。位置是<code>app/Helper/TaskHelper.php</code>，再搜索<code>renderDescriptionField</code>方法，即可找到，会发现，该方法中是直接返回的另外一个方法发加载，代码为<code>return $this-&gt;helper-&gt;form-&gt;textEditor(&#39;description&#39;, $values, $errors, array(&#39;tabindex&#39; =&gt; 2));</code></li><li>那么我们继续找，方法为<code>textEditor</code>的，位置为<code>app/Helper/FormHelper.php</code>,然后找到<code>textEditorEE</code>方法，代码如下</li></ol><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">textEditor</span><span class="params">($name, $values = array<span class="params">()</span>, array $errors = array<span class="params">()</span>, array $attributes = array<span class="params">()</span>)</span></span>&#123;</span><br><span class="line">  $params = <span class="keyword">array</span>(</span><br><span class="line">    <span class="string">'name'</span> =&gt; $name,</span><br><span class="line">    <span class="string">'text'</span> =&gt; <span class="keyword">isset</span>($values[$name]) ? $values[$name] : <span class="string">''</span>,</span><br><span class="line">    <span class="string">'css'</span> =&gt; <span class="keyword">$this</span>-&gt;errorClass($errors, $name),</span><br><span class="line">    <span class="string">'required'</span> =&gt; <span class="keyword">isset</span>($attributes[<span class="string">'required'</span>]) &amp;&amp; $attributes[<span class="string">'required'</span>],</span><br><span class="line">    <span class="string">'tabindex'</span> =&gt; <span class="keyword">isset</span>($attributes[<span class="string">'tabindex'</span>]) ? $attributes[<span class="string">'tabindex'</span>] : <span class="string">'-1'</span>,</span><br><span class="line">    <span class="string">'labelPreview'</span> =&gt; t(<span class="string">'Preview'</span>),</span><br><span class="line">    <span class="string">'labelWrite'</span> =&gt; t(<span class="string">'Write'</span>),</span><br><span class="line">    <span class="string">'placeholder'</span> =&gt; t(<span class="string">'Write your text in Markdown'</span>),</span><br><span class="line">    <span class="string">'autofocus'</span> =&gt; <span class="keyword">isset</span>($attributes[<span class="string">'autofocus'</span>]) &amp;&amp; $attributes[<span class="string">'autofocus'</span>],</span><br><span class="line">    <span class="string">'suggestOptions'</span> =&gt; <span class="keyword">array</span>(</span><br><span class="line">      <span class="string">'triggers'</span> =&gt; <span class="keyword">array</span>(</span><br><span class="line">        <span class="string">'#'</span> =&gt; <span class="keyword">$this</span>-&gt;helper-&gt;url-&gt;to(<span class="string">'TaskAjaxController'</span>, <span class="string">'suggest'</span>, <span class="keyword">array</span>(<span class="string">'search'</span> =&gt; <span class="string">'SEARCH_TERM'</span>)),</span><br><span class="line">       )</span><br><span class="line">      ),</span><br><span class="line">   );</span><br><span class="line"></span><br><span class="line">   <span class="keyword">if</span> (<span class="keyword">isset</span>($values[<span class="string">'project_id'</span>])) &#123;</span><br><span class="line">   $params[<span class="string">'suggestOptions'</span>][<span class="string">'triggers'</span>][<span class="string">'@'</span>] = <span class="keyword">$this</span>-&gt;helper-&gt;url-&gt;to(<span class="string">'UserAjaxController'</span>, <span class="string">'mention'</span>, <span class="keyword">array</span>(<span class="string">'project_id'</span> =&gt; $values[<span class="string">'project_id'</span>], <span class="string">'search'</span> =&gt; <span class="string">'SEARCH_TERM'</span>));</span><br><span class="line">   &#125;</span><br><span class="line">   $html = <span class="string">'&lt;div class="js-text-editor" data-params=\''</span>.json_encode($params, JSON_HEX_APOS).<span class="string">'\'&gt;&lt;/div&gt;'</span>;</span><br><span class="line">   $html .= <span class="keyword">$this</span>-&gt;errorList($errors, $name);</span><br><span class="line">   <span class="keyword">return</span> $html;</span><br><span class="line"> &#125;</span><br></pre></td></tr></table></figure><p>我们需要做的是，只需要改一行代码，<br>将</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$html = &apos;&lt;div class=&quot;js-text-editor&quot; data-params=\&apos;&apos;.json_encode($params, JSON_HEX_APOS).&apos;\&apos;&gt;&lt;/div&gt;&apos;;</span><br></pre></td></tr></table></figure><p>改为富文本编辑器加载的div，</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$html = &apos;&lt;div class=&quot;js-wang-edit&quot; id=&quot;wang-editor&quot; style=&quot;width: 100%&quot;&gt;&lt;/div&gt;&apos;;</span><br></pre></td></tr></table></figure><p>这样就可以了，我们再运行页面看看。注意，class为<code>js-wang-edit</code>因为咱们之前的js注册名为<code>wang-edit</code><br>这里class引入的时候，在前面加上<code>js-</code>后面写上js的注册名，这些配置好之后，运行图如下：<br><img src="https://raw.githubusercontent.com/meaoo/blog_img/master/2018/08/17/7.png" alt="运行图"></p><h2 id="关键任务测试"><a href="#关键任务测试" class="headerlink" title="关键任务测试"></a>关键任务测试</h2><p>富文本编辑器加载成，那么试试这次的关键任务，截图直接粘贴到富文本编辑器，效果如下图<br><img src="https://raw.githubusercontent.com/meaoo/blog_img/master/2018/08/17/8.png" alt="效果图"></p><h2 id="问题"><a href="#问题" class="headerlink" title="问题"></a>问题</h2><p>然后点击保存按钮，你会发现，之前的功夫都白费了。因为内容根本就没有添加到数据库。</p><h2 id="解决-1"><a href="#解决-1" class="headerlink" title="解决"></a>解决</h2><p>这个问题是肯定会出现的，如果你仔细的话，会发现，提交的数据中，<code>description</code>字段为空，然后再看之前的编辑器，内容其实是一个<code>textarea</code>容器，那么解决办法来了</p><ol><li>在渲染富文本编辑器的下面添加上一个隐藏的<code>textarea</code>，id为<code>description</code>,name为<code>description</code>，另外将<code>$params[&#39;text&#39;]</code>加载进去，这个参数取到的是之前的内容，代码如下</li></ol><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">textEditor</span><span class="params">($name, $values = array<span class="params">()</span>, array $errors = array<span class="params">()</span>, array $attributes = array<span class="params">()</span>)</span></span>&#123;</span><br><span class="line">  $params = <span class="keyword">array</span>(</span><br><span class="line">    <span class="string">'name'</span> =&gt; $name,</span><br><span class="line">    <span class="string">'text'</span> =&gt; <span class="keyword">isset</span>($values[$name]) ? $values[$name] : <span class="string">''</span>,</span><br><span class="line">    <span class="string">'css'</span> =&gt; <span class="keyword">$this</span>-&gt;errorClass($errors, $name),</span><br><span class="line">    <span class="string">'required'</span> =&gt; <span class="keyword">isset</span>($attributes[<span class="string">'required'</span>]) &amp;&amp; $attributes[<span class="string">'required'</span>],</span><br><span class="line">    <span class="string">'tabindex'</span> =&gt; <span class="keyword">isset</span>($attributes[<span class="string">'tabindex'</span>]) ? $attributes[<span class="string">'tabindex'</span>] : <span class="string">'-1'</span>,</span><br><span class="line">    <span class="string">'labelPreview'</span> =&gt; t(<span class="string">'Preview'</span>),</span><br><span class="line">    <span class="string">'labelWrite'</span> =&gt; t(<span class="string">'Write'</span>),</span><br><span class="line">    <span class="string">'placeholder'</span> =&gt; t(<span class="string">'Write your text in Markdown'</span>),</span><br><span class="line">    <span class="string">'autofocus'</span> =&gt; <span class="keyword">isset</span>($attributes[<span class="string">'autofocus'</span>]) &amp;&amp; $attributes[<span class="string">'autofocus'</span>],</span><br><span class="line">    <span class="string">'suggestOptions'</span> =&gt; <span class="keyword">array</span>(</span><br><span class="line">      <span class="string">'triggers'</span> =&gt; <span class="keyword">array</span>(</span><br><span class="line">        <span class="string">'#'</span> =&gt; <span class="keyword">$this</span>-&gt;helper-&gt;url-&gt;to(<span class="string">'TaskAjaxController'</span>, <span class="string">'suggest'</span>, <span class="keyword">array</span>(<span class="string">'search'</span> =&gt; <span class="string">'SEARCH_TERM'</span>)),</span><br><span class="line">       )</span><br><span class="line">      ),</span><br><span class="line">   );</span><br><span class="line"></span><br><span class="line">   <span class="keyword">if</span> (<span class="keyword">isset</span>($values[<span class="string">'project_id'</span>])) &#123;</span><br><span class="line">   $params[<span class="string">'suggestOptions'</span>][<span class="string">'triggers'</span>][<span class="string">'@'</span>] = <span class="keyword">$this</span>-&gt;helper-&gt;url-&gt;to(<span class="string">'UserAjaxController'</span>, <span class="string">'mention'</span>, <span class="keyword">array</span>(<span class="string">'project_id'</span> =&gt; $values[<span class="string">'project_id'</span>], <span class="string">'search'</span> =&gt; <span class="string">'SEARCH_TERM'</span>));</span><br><span class="line">   &#125;</span><br><span class="line">   $html = <span class="string">'&lt;div class="js-wang-edit" id="wang-editor" style="width: 100%"&gt;&lt;p&gt;'</span>.$params[<span class="string">'text'</span>].<span class="string">'&lt;/p&gt;&lt;/div&gt;'</span>;</span><br><span class="line">   $html .= <span class="string">'&lt;textarea  name="description" id="description" style="display: none"&gt;'</span>.$params[<span class="string">'text'</span>].<span class="string">'&lt;/textarea&gt;'</span>;</span><br><span class="line">   $html .= <span class="keyword">$this</span>-&gt;errorList($errors, $name);</span><br><span class="line">   <span class="keyword">return</span> $html;</span><br><span class="line"> &#125;</span><br></pre></td></tr></table></figure><h2 id="数据库出问题"><a href="#数据库出问题" class="headerlink" title="数据库出问题"></a>数据库出问题</h2><p>这时候我们再试试，没问题，文字可以保存，图片可以保存进去。但是，如果你幸运的话，会看到这么一个错误，<code>Internal Error: SQL error: SQLSTATE[22001]: String data, right truncated: 1046 Data too long for column &#39;description&#39; as row 1</code>，报错很明显，数据库的字段不够长。</p><h2 id="解决数据库问题"><a href="#解决数据库问题" class="headerlink" title="解决数据库问题"></a>解决数据库问题</h2><ol><li>修改tasks表的报错,sql代码如下</li></ol><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> <span class="string">`kanboard`</span>.<span class="string">`tasks`</span> </span><br><span class="line"><span class="keyword">MODIFY</span> <span class="keyword">COLUMN</span> <span class="string">`description`</span> longtext <span class="built_in">CHARACTER</span> <span class="keyword">SET</span> utf8mb4 <span class="keyword">COLLATE</span> utf8mb4_unicode_ci <span class="literal">NULL</span> <span class="keyword">AFTER</span> <span class="string">`title`</span>;</span><br></pre></td></tr></table></figure><ol start="2"><li>修改user_has_unread_notifications表的报错，sql代码如下</li></ol><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> <span class="string">`kanboard`</span>.<span class="string">`user_has_unread_notifications`</span> </span><br><span class="line"><span class="keyword">MODIFY</span> <span class="keyword">COLUMN</span> <span class="string">`event_data`</span> longtext <span class="built_in">CHARACTER</span> <span class="keyword">SET</span> utf8mb4 <span class="keyword">COLLATE</span> utf8mb4_unicode_ci <span class="keyword">NOT</span> <span class="literal">NULL</span> <span class="keyword">AFTER</span> <span class="string">`event_name`</span>;</span><br></pre></td></tr></table></figure><ol start="3"><li>修改project_activities表的报错，sql代码如下</li></ol><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> <span class="string">`kanboard`</span>.<span class="string">`project_activities`</span> </span><br><span class="line"><span class="keyword">MODIFY</span> <span class="keyword">COLUMN</span> <span class="string">`data`</span> longtext <span class="built_in">CHARACTER</span> <span class="keyword">SET</span> utf8mb4 <span class="keyword">COLLATE</span> utf8mb4_unicode_ci <span class="literal">NULL</span> <span class="keyword">AFTER</span> <span class="string">`task_id`</span>;</span><br></pre></td></tr></table></figure><p>再次运行，会有一个惊喜的发现，问题解决了。</p><h2 id="邮件内容问题"><a href="#邮件内容问题" class="headerlink" title="邮件内容问题"></a>邮件内容问题</h2><p>邮件提醒的内容可能会让你更惊喜，如下图<br><img src="https://raw.githubusercontent.com/meaoo/blog_img/master/2018/08/17/9.png" alt="邮件提醒"><br>是的，邮件提醒中是这样的，因为html没有解析</p><h2 id="邮件内容解决"><a href="#邮件内容解决" class="headerlink" title="邮件内容解决"></a>邮件内容解决</h2><p>这个解决办法是临时的，也是最暴力的，就是在发送邮件的时候，将内容描述去掉,代码目录在<code>app/Model/UserUnreadNotificationModel.php</code>中的<code>create</code>方法，我们使用<code>unset($event_data[&#39;description&#39;]);</code>将<code>description</code>去掉即可，这个会在下个版本进行改进</p><h2 id="任务展示问题"><a href="#任务展示问题" class="headerlink" title="任务展示问题"></a>任务展示问题</h2><p>当前面这些都解决了，图片也添加进去了，你开开心心的点开任务的时候，会发现如下图<br><img src="https://raw.githubusercontent.com/meaoo/blog_img/master/2018/08/17/10.png" alt="展示页面"></p><h2 id="任务展示问题解决"><a href="#任务展示问题解决" class="headerlink" title="任务展示问题解决"></a>任务展示问题解决</h2><ol><li>找到任务展示文件<code>app/Template/task/show.php</code>文件</li><li>找到<code>empty($task[&#39;description&#39;])</code>这个的判断，代码如下</li></ol><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span> <span class="keyword">if</span> (!<span class="keyword">empty</span>($task[<span class="string">'description'</span>])): <span class="meta">?&gt;</span></span><br><span class="line"> <span class="meta">&lt;?</span>= <span class="keyword">$this</span>-&gt;hook-&gt;render(<span class="string">'template:task:show:before-description'</span>, <span class="keyword">array</span>(<span class="string">'task'</span> =&gt; $task, <span class="string">'project'</span> =&gt; $project)) <span class="meta">?&gt;</span></span><br><span class="line"> <span class="meta">&lt;?</span>= <span class="keyword">$this</span>-&gt;render(<span class="string">'task/description'</span>, <span class="keyword">array</span>(<span class="string">'task'</span> =&gt; $task)) <span class="meta">?&gt;</span></span><br><span class="line"><span class="meta">&lt;?php</span> <span class="keyword">endif</span> <span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure><p>上面代码是进行的markdown的解析，由于富文本编辑器存入数据库的就是html所以我们就不用解析，直接展示即可，代码如下</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span> <span class="keyword">if</span> (!<span class="keyword">empty</span>($task[<span class="string">'description'</span>])): <span class="meta">?&gt;</span></span><br><span class="line">   <span class="meta">&lt;?</span>= $task[<span class="string">'description'</span>] <span class="meta">?&gt;</span></span><br><span class="line"><span class="meta">&lt;?php</span> <span class="keyword">endif</span> <span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure><h2 id="全都乱了"><a href="#全都乱了" class="headerlink" title="全都乱了"></a>全都乱了</h2><p>等上面的事情都好了之后，你的心情的美美的，当你打开评论的时候会发现，全乱了，评论的面板也变成了富文本编辑器，所有的编辑地方都变成了富文本编辑器。这个时候我们需要将之前改的<code>textEditor</code>方法进行一个封装，因为<code>renderDescriptionField</code>方法只是任务创建和修改的方法，不会影响其他的，将<code>renderDescriptionField</code>中的方法改成我们自己封装的方法即可。</p><h1 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h1><p>上面的解决方法只是临时的，需要改进的地方是，图片上传使用的是base64，会对数据库造成大批量的字节写入，拖垮数据库，需要将图片上传改用cdn存储<br>已经有了解决方法，点击链接跳转<a href="https://www.meaoo.cn/2018/09/03/20180903001.html">解决Kanboard修改富文本编辑器遗留问题</a></p><h1 id="结束"><a href="#结束" class="headerlink" title="结束"></a>结束</h1><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">E-mail：blog<span class="meta">@meaoo</span>.cn</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      &lt;blockquote&gt;
&lt;p&gt;近期有这样的一个需求，需要把&lt;span class=&quot;exturl&quot; data-url=&quot;aHR0cHM6Ly9rYW5ib2FyZC5vcmcv&quot; title=&quot;https://kanboard.org/&quot;&gt;kanboard&lt;i class=&quot;fa fa-external-link&quot;&gt;&lt;/i&gt;&lt;/span&gt;进行改进，需要在添加任务的时候，可以添加图片。由于&lt;span class=&quot;exturl&quot; data-url=&quot;aHR0cHM6Ly9rYW5ib2FyZC5vcmcv&quot; title=&quot;https://kanboard.org/&quot;&gt;kanboard&lt;i class=&quot;fa fa-external-link&quot;&gt;&lt;/i&gt;&lt;/span&gt;使用的是markddown进行文本编辑，那么问题来了，怎样进行markddown的图片上传呢，解决方案是有的，比如简书，已经实现了markddown图片粘贴上传。但是呢，我是个比较懒的人，那么还有一个解决方案，使用富文本编辑器。下文介绍如何将kanboard中的markddown编辑器修改为富文本编辑器。&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h1 id=&quot;选材&quot;&gt;&lt;a href=&quot;#选材&quot; class=&quot;headerlink&quot; title=&quot;选材&quot;&gt;&lt;/a&gt;选材&lt;/h1&gt;&lt;p&gt;现今富文本编辑器已经有很多了，而且都很完善，那么选择哪个富文本编辑器的问题就来了。需求有两个：&lt;/p&gt;
&lt;h2 id=&quot;需求&quot;&gt;&lt;a href=&quot;#需求&quot; class=&quot;headerlink&quot; title=&quot;需求&quot;&gt;&lt;/a&gt;需求&lt;/h2&gt;&lt;ol&gt;
&lt;li&gt;可以直接粘贴图片到富文本编辑器&lt;/li&gt;
&lt;li&gt;改动代码越少越好&lt;/li&gt;
&lt;/ol&gt;
&lt;h2 id=&quot;入选&quot;&gt;&lt;a href=&quot;#入选&quot; class=&quot;headerlink&quot; title=&quot;入选&quot;&gt;&lt;/a&gt;入选&lt;/h2&gt;&lt;p&gt;经过一系列的筛选，现在有两个富文本编辑器入选&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;&lt;span class=&quot;exturl&quot; data-url=&quot;aHR0cDovL3VlZGl0b3IuYmFpZHUuY29t&quot; title=&quot;http://ueditor.baidu.com&quot;&gt;百度的UEditor&lt;i class=&quot;fa fa-external-link&quot;&gt;&lt;/i&gt;&lt;/span&gt;&lt;/li&gt;
&lt;li&gt;&lt;span class=&quot;exturl&quot; data-url=&quot;aHR0cDovL3d3dy53YW5nZWRpdG9yLmNvbS8=&quot; title=&quot;http://www.wangeditor.com/&quot;&gt;wangEditor&lt;i class=&quot;fa fa-external-link&quot;&gt;&lt;/i&gt;&lt;/span&gt;&lt;/li&gt;
&lt;/ol&gt;
&lt;h2 id=&quot;选择&quot;&gt;&lt;a href=&quot;#选择&quot; class=&quot;headerlink&quot; title=&quot;选择&quot;&gt;&lt;/a&gt;选择&lt;/h2&gt;&lt;p&gt;由于百度UEditor已经在2016年的5月就不再维护，并且需要引入资源略多，虽说只有js资源和css资源，但是还是略多。&lt;br&gt;最后选择使用wangEditor富文本编辑器，为啥呢，因为只需要引入js文件即可。&lt;/p&gt;
    
    </summary>
    
    
      <category term="Kanboard" scheme="https://www.meaoo.cn/categories/Kanboard/"/>
    
    
      <category term="Coder" scheme="https://www.meaoo.cn/tags/Coder/"/>
    
      <category term="PHP" scheme="https://www.meaoo.cn/tags/PHP/"/>
    
      <category term="Kanboard" scheme="https://www.meaoo.cn/tags/Kanboard/"/>
    
  </entry>
  
  <entry>
    <title>袁世凯故居</title>
    <link href="https://www.meaoo.cn/2018/07/27/20180727001.html"/>
    <id>https://www.meaoo.cn/2018/07/27/20180727001.html</id>
    <published>2018-07-26T16:00:00.000Z</published>
    <updated>2021-01-26T03:20:44.962Z</updated>
    
    <content type="html"><![CDATA[<blockquote><p>设备： iPhone X<br>地点：河南.项城<br>时间：2018年7月27日</p></blockquote><p><img src="https://raw.githubusercontent.com/meaoo/blog_img/master/2018/07/27/001.JPG" alt></p><a id="more"></a><p><img src="https://raw.githubusercontent.com/meaoo/blog_img/master/2018/07/27/002.JPG" alt><br><img src="https://raw.githubusercontent.com/meaoo/blog_img/master/2018/07/27/003.JPG" alt><br><img src="https://raw.githubusercontent.com/meaoo/blog_img/master/2018/07/27/004.JPG" alt><br><img src="https://raw.githubusercontent.com/meaoo/blog_img/master/2018/07/27/005.JPG" alt><br><img src="https://raw.githubusercontent.com/meaoo/blog_img/master/2018/07/27/006.JPG" alt><br><img src="https://raw.githubusercontent.com/meaoo/blog_img/master/2018/07/27/007.JPG" alt><br><img src="https://raw.githubusercontent.com/meaoo/blog_img/master/2018/07/27/008.JPG" alt><br><img src="https://raw.githubusercontent.com/meaoo/blog_img/master/2018/07/27/009.JPG" alt></p>]]></content>
    
    <summary type="html">
    
      &lt;blockquote&gt;
&lt;p&gt;设备： iPhone X&lt;br&gt;地点：河南.项城&lt;br&gt;时间：2018年7月27日&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;&lt;img src=&quot;https://raw.githubusercontent.com/meaoo/blog_img/master/2018/07/27/001.JPG&quot; alt&gt;&lt;/p&gt;
    
    </summary>
    
    
      <category term="Travel" scheme="https://www.meaoo.cn/categories/Travel/"/>
    
    
      <category term="Travel" scheme="https://www.meaoo.cn/tags/Travel/"/>
    
  </entry>
  
  <entry>
    <title>Windows下Jetbrains系列插件安装问题</title>
    <link href="https://www.meaoo.cn/2018/07/16/20180716001.html"/>
    <id>https://www.meaoo.cn/2018/07/16/20180716001.html</id>
    <published>2018-07-15T16:00:00.000Z</published>
    <updated>2021-01-26T03:20:45.060Z</updated>
    
    <content type="html"><![CDATA[<blockquote><p>Jetbrains Intellij 是本人目前为止，使用过的最好用的IDE，但是也有很多让人郁闷的地方，比如今天咱们要说的，插件下载问题。</p></blockquote><h1 id="插件下载失败"><a href="#插件下载失败" class="headerlink" title="插件下载失败"></a>插件下载失败</h1><p> 当你满怀希望的到IDE的 Plugins 中进行插件下载的是，你会发现，过了半天，会弹出一个请求超时的错误信息。<br> 网上有很多伙伴解释了原因，在2018年之前，Jetbrains使用的请求还是<code>http</code>的请求，但是在2018版本的时候，将<code>http://plugins.jetbrains.com/</code>改为了<code>https://plugins.jetbrains.com/</code>这会带来什么，目前我还不太清楚，<br> 但是，带来的影响是，086区的小伙伴们，无法快乐的进行插件下载了。当然，也包括插件更新。具体的报错如下图：<br> <img src="https://raw.githubusercontent.com/meaoo/blog_img/master/2018/07/16/1.png" alt="插件安装请求中"></p><p> <img src="https://raw.githubusercontent.com/meaoo/blog_img/master/2018/07/16/2.png" alt="插件安装失败"></p> <a id="more"></a><h1 id="解决办法"><a href="#解决办法" class="headerlink" title="解决办法"></a>解决办法</h1><h2 id="解决办法一"><a href="#解决办法一" class="headerlink" title="解决办法一"></a>解决办法一</h2><p> 第一个办法比较暴力，比较简单，那就是到<code>http://plugins.jetbrains.com/</code>官方的插件库里进行下载，<br> 需要注意的是，下载的是，注意你的版本与下载的版本，<br> 自己IDE的版本查看方式，如下图：<br> <img src="https://raw.githubusercontent.com/meaoo/blog_img/master/2018/07/16/8.png" alt="查看本地IDE版本"><br> <img src="https://raw.githubusercontent.com/meaoo/blog_img/master/2018/07/16/6.png" alt="查看版本"></p><p> 然后到官网，搜索自己想要的插件，下载的时候，也要注意对应的版本，如下图：<br> <img src="https://raw.githubusercontent.com/meaoo/blog_img/master/2018/07/16/7.png" alt="官网版本"></p><h2 id="解决办法二"><a href="#解决办法二" class="headerlink" title="解决办法二"></a>解决办法二</h2><p> 虽然这个方法叫解决办法二，但是，一点也不二。解决办法对于可以去001区的小伙伴，非常友好。请带上你以往去001区的装备，进行如下设置。</p><h3 id="设置Proxy"><a href="#设置Proxy" class="headerlink" title="设置Proxy"></a>设置<code>Proxy</code></h3><p> 在<code>Brows Ropositories</code>的左下角，找到<code>HTTP Proxy Setings</code>，一般情况下，端口都是<code>1080</code>，当然如果你修改了端口，请输入自己的端口。具体设置如下图：<br> <img src="https://raw.githubusercontent.com/meaoo/blog_img/master/2018/07/16/10.png" alt="Proxy设置"></p><h3 id="开心的下载插件"><a href="#开心的下载插件" class="headerlink" title="开心的下载插件"></a>开心的下载插件</h3><p> 这时候，你就可以开心的下载插件了，如下图：<br> <img src="https://raw.githubusercontent.com/meaoo/blog_img/master/2018/07/16/5.png" alt="下载插件"></p><h1 id="结束"><a href="#结束" class="headerlink" title="结束"></a>结束</h1><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">E-mail：blog<span class="meta">@meaoo</span>.cn</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      &lt;blockquote&gt;
&lt;p&gt;Jetbrains Intellij 是本人目前为止，使用过的最好用的IDE，但是也有很多让人郁闷的地方，比如今天咱们要说的，插件下载问题。&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h1 id=&quot;插件下载失败&quot;&gt;&lt;a href=&quot;#插件下载失败&quot; class=&quot;headerlink&quot; title=&quot;插件下载失败&quot;&gt;&lt;/a&gt;插件下载失败&lt;/h1&gt;&lt;p&gt; 当你满怀希望的到IDE的 Plugins 中进行插件下载的是，你会发现，过了半天，会弹出一个请求超时的错误信息。&lt;br&gt; 网上有很多伙伴解释了原因，在2018年之前，Jetbrains使用的请求还是&lt;code&gt;http&lt;/code&gt;的请求，但是在2018版本的时候，将&lt;code&gt;http://plugins.jetbrains.com/&lt;/code&gt;改为了&lt;code&gt;https://plugins.jetbrains.com/&lt;/code&gt;这会带来什么，目前我还不太清楚，&lt;br&gt; 但是，带来的影响是，086区的小伙伴们，无法快乐的进行插件下载了。当然，也包括插件更新。具体的报错如下图：&lt;br&gt; &lt;img src=&quot;https://raw.githubusercontent.com/meaoo/blog_img/master/2018/07/16/1.png&quot; alt=&quot;插件安装请求中&quot;&gt;&lt;/p&gt;
&lt;p&gt; &lt;img src=&quot;https://raw.githubusercontent.com/meaoo/blog_img/master/2018/07/16/2.png&quot; alt=&quot;插件安装失败&quot;&gt;&lt;/p&gt;
    
    </summary>
    
    
      <category term="Tool" scheme="https://www.meaoo.cn/categories/Tool/"/>
    
    
      <category term="Tool" scheme="https://www.meaoo.cn/tags/Tool/"/>
    
  </entry>
  
  <entry>
    <title>使用NRM进行NPM的源管理</title>
    <link href="https://www.meaoo.cn/2018/06/26/20180626001.html"/>
    <id>https://www.meaoo.cn/2018/06/26/20180626001.html</id>
    <published>2018-06-25T16:00:00.000Z</published>
    <updated>2021-01-26T03:20:44.946Z</updated>
    
    <content type="html"><![CDATA[<blockquote><p>由于国内使用npm官方源安装包的时候比较慢，基本上在国内开发都会修改npm源地址</p></blockquote><h1 id="查看NPM源地址，在终端输入以下命令"><a href="#查看NPM源地址，在终端输入以下命令" class="headerlink" title="查看NPM源地址，在终端输入以下命令"></a>查看NPM源地址，在终端输入以下命令</h1> <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm config list</span><br></pre></td></tr></table></figure><p> 会看到官方的npm源<br> <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">metrics-registry = &quot;https://registry.npmjs.org/&quot;</span><br></pre></td></tr></table></figure></p><h1 id="常用源"><a href="#常用源" class="headerlink" title="常用源"></a>常用源</h1><h2 id="源地址"><a href="#源地址" class="headerlink" title="源地址"></a>源地址</h2><p> 国内常用的镜像地址如淘宝</p><p> <code>npm：https://registry.npm.taobao.org/</code></p><h2 id="修改registry"><a href="#修改registry" class="headerlink" title="修改registry"></a>修改registry</h2><p> 修改registry地址很简单，在终端输入</p><p> <code>npm set registry https://registry.npm.taobao.org/</code></p><h2 id="删除源"><a href="#删除源" class="headerlink" title="删除源"></a>删除源</h2><p> 如果某天不想使用，就rm删掉即可</p><p> <code>npm config rm registry</code></p><p> 这样做当然没问题，一点问题都没有。那么问题来了，如果我想在几个源之间随意切换，就要不断的设置，和删除。</p><a id="more"></a><h1 id="NRM来了"><a href="#NRM来了" class="headerlink" title="NRM来了"></a>NRM来了</h1><p> 于是有了nrm</p><blockquote><p>nrm是专门用来管理和快速切换私人配置的registry</p></blockquote><h2 id="安装-建议全局安装"><a href="#安装-建议全局安装" class="headerlink" title="安装 (建议全局安装)"></a>安装 (建议全局安装)</h2><p> <code>npm install nrm -g --save</code></p><h2 id="配置"><a href="#配置" class="headerlink" title="配置"></a>配置</h2><p> nrm有一些默认配置，用<code>nrm ls</code>命令查看默认配置，带*号即为当前使用的配置<br> <code>nrm ls</code>输出结果如下图</p><p> <img src="https://raw.githubusercontent.com/meaoo/blog_img/master/2018/06/20180626163947.png" alt="TIM截图20180626163947"></p><h3 id="输出当前源"><a href="#输出当前源" class="headerlink" title="输出当前源"></a>输出当前源</h3><p> <code>nrm current</code></p><h3 id="切换源"><a href="#切换源" class="headerlink" title="切换源"></a>切换源</h3><p> 切到源<code>http://r.cnpmjs.org/</code>，命令：<code>nrm use 源的别名</code>，即</p><p> <code>nrm use cnpm</code></p><p> 执行成功提示如下<br> <img src="https://raw.githubusercontent.com/meaoo/blog_img/master/2018/06/20180626164204.png" alt="TIM截图20180626164204"></p><h3 id="添加自定义源"><a href="#添加自定义源" class="headerlink" title="添加自定义源"></a>添加自定义源</h3><p> <code>nrm add</code></p><p> 如<code>http://registry.npm.meaoo.cn</code>(随便写的)，起个别名叫meaoo</p><p> <code>nrm add meaoo http://registry.npm.meaoo.cn</code></p><p> 添加成功，如下图<br> <img src="https://raw.githubusercontent.com/meaoo/blog_img/master/2018/06/20180626164421.png" alt="TIM截图20180626164421"></p><p> 接着查看nrm配置，如下图<br> <img src="https://raw.githubusercontent.com/meaoo/blog_img/master/2018/06/20180626164506.png" alt="TIM截图20180626164506"></p><h3 id="源测试"><a href="#源测试" class="headerlink" title="源测试"></a>源测试</h3><p> 测试一下某个源是速度是否够快，<code>nrm test 源别名</code></p><p> <code>nrm test cnpm</code></p><p> 结果如下图<br> <img src="https://raw.githubusercontent.com/meaoo/blog_img/master/2018/06/20180626164716.png" alt="TIM截图20180626164716"></p><h3 id="删除源-1"><a href="#删除源-1" class="headerlink" title="删除源"></a>删除源</h3><p> 删除nrm内的某个源，<code>nrl del 源别名</code></p><p> <code>nrm del meaoo</code></p><p> 运行成功，如下图<br> <img src="https://raw.githubusercontent.com/meaoo/blog_img/master/2018/06/20180626164830.png" alt="TIM截图20180626164830"></p><h1 id="结束"><a href="#结束" class="headerlink" title="结束"></a>结束</h1><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">E-mail：blog<span class="meta">@meaoo</span>.cn</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      &lt;blockquote&gt;
&lt;p&gt;由于国内使用npm官方源安装包的时候比较慢，基本上在国内开发都会修改npm源地址&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h1 id=&quot;查看NPM源地址，在终端输入以下命令&quot;&gt;&lt;a href=&quot;#查看NPM源地址，在终端输入以下命令&quot; class=&quot;headerlink&quot; title=&quot;查看NPM源地址，在终端输入以下命令&quot;&gt;&lt;/a&gt;查看NPM源地址，在终端输入以下命令&lt;/h1&gt; &lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;npm config list&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;

&lt;p&gt; 会看到官方的npm源&lt;br&gt; &lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;metrics-registry = &amp;quot;https://registry.npmjs.org/&amp;quot;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;h1 id=&quot;常用源&quot;&gt;&lt;a href=&quot;#常用源&quot; class=&quot;headerlink&quot; title=&quot;常用源&quot;&gt;&lt;/a&gt;常用源&lt;/h1&gt;&lt;h2 id=&quot;源地址&quot;&gt;&lt;a href=&quot;#源地址&quot; class=&quot;headerlink&quot; title=&quot;源地址&quot;&gt;&lt;/a&gt;源地址&lt;/h2&gt;&lt;p&gt; 国内常用的镜像地址如淘宝&lt;/p&gt;
&lt;p&gt; &lt;code&gt;npm：https://registry.npm.taobao.org/&lt;/code&gt;&lt;/p&gt;
&lt;h2 id=&quot;修改registry&quot;&gt;&lt;a href=&quot;#修改registry&quot; class=&quot;headerlink&quot; title=&quot;修改registry&quot;&gt;&lt;/a&gt;修改registry&lt;/h2&gt;&lt;p&gt; 修改registry地址很简单，在终端输入&lt;/p&gt;
&lt;p&gt; &lt;code&gt;npm set registry https://registry.npm.taobao.org/&lt;/code&gt;&lt;/p&gt;
&lt;h2 id=&quot;删除源&quot;&gt;&lt;a href=&quot;#删除源&quot; class=&quot;headerlink&quot; title=&quot;删除源&quot;&gt;&lt;/a&gt;删除源&lt;/h2&gt;&lt;p&gt; 如果某天不想使用，就rm删掉即可&lt;/p&gt;
&lt;p&gt; &lt;code&gt;npm config rm registry&lt;/code&gt;&lt;/p&gt;
&lt;p&gt; 这样做当然没问题，一点问题都没有。那么问题来了，如果我想在几个源之间随意切换，就要不断的设置，和删除。&lt;/p&gt;
    
    </summary>
    
    
      <category term="Tool" scheme="https://www.meaoo.cn/categories/Tool/"/>
    
    
      <category term="Tool" scheme="https://www.meaoo.cn/tags/Tool/"/>
    
  </entry>
  
  <entry>
    <title>Free Public DNS Server</title>
    <link href="https://www.meaoo.cn/2018/06/01/20180601001.html"/>
    <id>https://www.meaoo.cn/2018/06/01/20180601001.html</id>
    <published>2018-05-31T16:00:00.000Z</published>
    <updated>2021-01-26T03:20:44.959Z</updated>
    
    <content type="html"><![CDATA[<blockquote><p>访问网页，会莫名其妙被加入一些广告？那你可能需要更换一下DNS，这里不再讲解如何更换DNS，因为当你搜索到这篇文章的时候，你已经知道了如何更换DNS，即时你不知道如何更换，那就去百度或者Google一下，更换DNS的文章满天飞。这里主要介绍一些，主流的DNS</p></blockquote><h1 id="国外主流DNS服务器IP-Global-Public-DNS-Server"><a href="#国外主流DNS服务器IP-Global-Public-DNS-Server" class="headerlink" title="国外主流DNS服务器IP[Global Public DNS Server]"></a>国外主流DNS服务器IP[Global Public DNS Server]</h1><h2 id="Google-Public-DNS"><a href="#Google-Public-DNS" class="headerlink" title="Google Public DNS"></a><span class="exturl" data-url="aHR0cHM6Ly9kZXZlbG9wZXJzLmdvb2dsZS5jb20vc3BlZWQvcHVibGljLWRucy9kb2NzL3VzaW5n" title="https://developers.google.com/speed/public-dns/docs/using">Google Public DNS<i class="fa fa-external-link"></i></span></h2><div class="note success">            <p>Google 提供的公共免费 DNS，应该是最流行的 公共 DNS 了</p><p>IPv4</p><p><code>8.8.8.8</code><br><code>8.8.4.4</code></p><p>IPv6</p><p><code>2001:4860:4860::8888</code><br><code>2001:4860:4860::8844</code></p>          </div><h2 id="Cloudflare-DNS"><a href="#Cloudflare-DNS" class="headerlink" title="Cloudflare DNS"></a><span class="exturl" data-url="aHR0cHM6Ly8xLjEuMS4xL3poLUhhbnMv" title="https://1.1.1.1/zh-Hans/">Cloudflare DNS<i class="fa fa-external-link"></i></span></h2><div class="note success">            <p>Cloudflare DNS 是 Cloudflare 与 APNIC 联合推出的号称全球最快的 DNS 服务。APNIC 是一个管理亚太与大洋洲地区 IP 地址分配的非盈利性组织，1.1.1.1 归 APNIC 所有，现在交给 Cloudflare 来提供 DNS 服务</p><p>IPv4</p><p><code>1.1.1.1</code><br><code>1.0.0.1</code></p><p>IPv6</p><p><code>2606:4700:4700::1111</code><br><code>2606:4700:4700::1001</code></p>          </div><a id="more"></a><h2 id="IBM-Public-DNS"><a href="#IBM-Public-DNS" class="headerlink" title="IBM Public DNS"></a><span class="exturl" data-url="aHR0cHM6Ly93d3cucXVhZDkubmV0Lw==" title="https://www.quad9.net/">IBM Public DNS<i class="fa fa-external-link"></i></span></h2><div class="note success">            <p>IBM 提供的公共免费 DNS</p><p>IPv4</p><p><code>9.9.9.9</code></p><p>IPv6</p><p><code>2620:fe::fe</code><br><code>2620:fe::9</code></p>          </div><h2 id="诺顿-Norton-DNS（诺顿DNS将于2018年11月15日停止服务）"><a href="#诺顿-Norton-DNS（诺顿DNS将于2018年11月15日停止服务）" class="headerlink" title="诺顿 Norton DNS（诺顿DNS将于2018年11月15日停止服务）"></a><span class="exturl" data-url="aHR0cHM6Ly9kbnMubm9ydG9uLmNvbS9jb25maWd1cmVSb3V0ZXIuaHRtbA==" title="https://dns.norton.com/configureRouter.html">诺顿 Norton DNS（诺顿DNS将于2018年11月15日停止服务）<i class="fa fa-external-link"></i></span></h2><h3 id="诺顿DNS将于2018年11月15日停止服务，下图为官网截图"><a href="#诺顿DNS将于2018年11月15日停止服务，下图为官网截图" class="headerlink" title="诺顿DNS将于2018年11月15日停止服务，下图为官网截图"></a>诺顿DNS将于2018年11月15日停止服务，下图为官网截图</h3><p><img src="https://raw.githubusercontent.com/meaoo/blog_img/master/2018/08/27/1.png" alt="诺顿停止服务"></p><div class="note success">            <p>Norton 是老牌 IT 安全品牌，隶属于 Symantec 公司，Norton 推出的这几个 DNS 可以按照安全级别不同选择使用。<br>诺顿DNS将于2018年11月15日停止服务</p><h3 id="安全"><a href="#安全" class="headerlink" title="安全"></a>安全</h3><p><code>199.85.126.10</code><br><code>199.85.127.10</code></p><h3 id="安全-防成人内容"><a href="#安全-防成人内容" class="headerlink" title="安全+防成人内容"></a>安全+防成人内容</h3><p><code>199.85.126.20</code><br><code>199.85.127.20</code></p><h3 id="安全-防成人内容-其他"><a href="#安全-防成人内容-其他" class="headerlink" title="安全+防成人内容+其他"></a>安全+防成人内容+其他</h3><p><code>199.85.126.30</code><br><code>199.85.127.30</code></p>          </div><h2 id="OpenDNS"><a href="#OpenDNS" class="headerlink" title="OpenDNS"></a><span class="exturl" data-url="aHR0cHM6Ly93d3cub3BlbmRucy5jb20vc2V0dXBndWlkZS8=" title="https://www.opendns.com/setupguide/">OpenDNS<i class="fa fa-external-link"></i></span></h2><div class="note success">            <p>OpenDNS 是由老牌通信设备商 Cisco 提供的公共免费 DNS 服务<br><code>208.67.222.222</code><br><code>208.67.220.220</code></p>          </div><h2 id="Yandex-DNS"><a href="#Yandex-DNS" class="headerlink" title="Yandex DNS"></a><span class="exturl" data-url="aHR0cHM6Ly9kbnMueWFuZGV4LmNvbS8=" title="https://dns.yandex.com/">Yandex DNS<i class="fa fa-external-link"></i></span></h2><div class="note success">            <p>Yandex DNS 是俄国最大的搜索引擎</p><h3 id="基础版（快速可靠）"><a href="#基础版（快速可靠）" class="headerlink" title="基础版（快速可靠）"></a>基础版（快速可靠）</h3><p><code>77.88.8.8</code><br><code>77.88.8.1</code></p><h3 id="安全版（病毒和钓鱼防御）"><a href="#安全版（病毒和钓鱼防御）" class="headerlink" title="安全版（病毒和钓鱼防御）"></a>安全版（病毒和钓鱼防御）</h3><p><code>77.88.8.88</code><br><code>77.88.8.2</code></p><h3 id="家庭版（防成人内容）"><a href="#家庭版（防成人内容）" class="headerlink" title="家庭版（防成人内容）"></a>家庭版（防成人内容）</h3><p><code>77.88.8.7</code><br><code>77.88.8.3</code></p>          </div><h2 id="COMODO-SecureDNS"><a href="#COMODO-SecureDNS" class="headerlink" title="COMODO SecureDNS"></a><span class="exturl" data-url="aHR0cHM6Ly93d3cuY29tb2RvLmNvbS9zZWN1cmUtZG5zLw==" title="https://www.comodo.com/secure-dns/">COMODO SecureDNS<i class="fa fa-external-link"></i></span></h2><div class="note success">            <p>COMODO 是美国知名的 IT 安全服务商<br><code>8.26.56.26</code><br><code>8.20.247.20</code></p>          </div><h2 id="Freenom"><a href="#Freenom" class="headerlink" title="Freenom"></a><span class="exturl" data-url="aHR0cHM6Ly93d3cuZnJlZW5vbS53b3JsZA==" title="https://www.freenom.world">Freenom<i class="fa fa-external-link"></i></span></h2><div class="note success">            <p>Freenom 是西班牙免费域名提供商。<br><code>80.80.80.80</code><br><code>80.80.81.81</code></p>          </div><h1 id="国内主流DNS服务器IP-Chinese-Public-DNS-Server"><a href="#国内主流DNS服务器IP-Chinese-Public-DNS-Server" class="headerlink" title="国内主流DNS服务器IP[Chinese Public DNS Server]"></a>国内主流DNS服务器IP[Chinese Public DNS Server]</h1><h2 id="CNNIC-DNS"><a href="#CNNIC-DNS" class="headerlink" title="CNNIC DNS"></a><span class="exturl" data-url="aHR0cDovL3d3dy5zZG5zLmNuLw==" title="http://www.sdns.cn/">CNNIC DNS<i class="fa fa-external-link"></i></span></h2><div class="note success">            <p>CNNIC与国内外电信运营商合作采用 BGP Global AnyCast 技术分布式部署的专业公共DNS平台<br><code>1.2.4.8</code><br><code>210.2.4.8</code></p>          </div><h2 id="腾讯-DNS"><a href="#腾讯-DNS" class="headerlink" title="腾讯 DNS"></a><span class="exturl" data-url="aHR0cHM6Ly93d3cuZG5zcG9kLmNuL3Byb2R1Y3RzL3B1YmxpYy5kbnM=" title="https://www.dnspod.cn/products/public.dns">腾讯 DNS<i class="fa fa-external-link"></i></span></h2><div class="note success">            <p>由 DNSPod 提供的公共免费 DNS，后来 DNSPod 被腾讯(Tencent)收购，现在属于腾讯公司所有，稳定性和连通性也是不错的，经测试国外也可以使用<br><code>119.29.29.29</code><br><code>119.28.28.28</code></p>          </div><h2 id="阿里-DNS"><a href="#阿里-DNS" class="headerlink" title="阿里 DNS"></a><span class="exturl" data-url="aHR0cDovL3d3dy5hbGlkbnMuY29tLw==" title="http://www.alidns.com/">阿里 DNS<i class="fa fa-external-link"></i></span></h2><div class="note success">            <p>这组 DNS 是由阿里巴巴提供的，国内连通性还是不错的，国外部分地区连通性不是特别好，具体可以测试一下<br><code>223.5.5.5</code><br><code>223.6.6.6</code></p>          </div><h2 id="百度-DNS"><a href="#百度-DNS" class="headerlink" title="百度 DNS"></a><span class="exturl" data-url="aHR0cDovL2R1ZG5zLmJhaWR1LmNvbS9pbnRyby9wdWJsaWNkbnMv" title="http://dudns.baidu.com/intro/publicdns/">百度 DNS<i class="fa fa-external-link"></i></span></h2><div class="note success">            <p>中国最大的搜索引擎百度提供的公共 DNS，经测试国外连通性也是不错的</p><p>IPv4</p><p><code>180.76.76.76</code></p><p>IPv6</p><p><code>2400:da00::6666</code></p>          </div><h1 id="DNSPerf查看DNS全球状态"><a href="#DNSPerf查看DNS全球状态" class="headerlink" title="DNSPerf查看DNS全球状态"></a><span class="exturl" data-url="aHR0cDovL3d3dy5kbnNwZXJmLmNvbS8=" title="http://www.dnsperf.com/">DNSPerf<i class="fa fa-external-link"></i></span>查看DNS全球状态</h1><h1 id="结束"><a href="#结束" class="headerlink" title="结束"></a>结束</h1><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">E-mail：blog<span class="meta">@meaoo</span>.cn</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      &lt;blockquote&gt;
&lt;p&gt;访问网页，会莫名其妙被加入一些广告？那你可能需要更换一下DNS，这里不再讲解如何更换DNS，因为当你搜索到这篇文章的时候，你已经知道了如何更换DNS，即时你不知道如何更换，那就去百度或者Google一下，更换DNS的文章满天飞。这里主要介绍一些，主流的DNS&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h1 id=&quot;国外主流DNS服务器IP-Global-Public-DNS-Server&quot;&gt;&lt;a href=&quot;#国外主流DNS服务器IP-Global-Public-DNS-Server&quot; class=&quot;headerlink&quot; title=&quot;国外主流DNS服务器IP[Global Public DNS Server]&quot;&gt;&lt;/a&gt;国外主流DNS服务器IP[Global Public DNS Server]&lt;/h1&gt;&lt;h2 id=&quot;Google-Public-DNS&quot;&gt;&lt;a href=&quot;#Google-Public-DNS&quot; class=&quot;headerlink&quot; title=&quot;Google Public DNS&quot;&gt;&lt;/a&gt;&lt;span class=&quot;exturl&quot; data-url=&quot;aHR0cHM6Ly9kZXZlbG9wZXJzLmdvb2dsZS5jb20vc3BlZWQvcHVibGljLWRucy9kb2NzL3VzaW5n&quot; title=&quot;https://developers.google.com/speed/public-dns/docs/using&quot;&gt;Google Public DNS&lt;i class=&quot;fa fa-external-link&quot;&gt;&lt;/i&gt;&lt;/span&gt;&lt;/h2&gt;&lt;div class=&quot;note success&quot;&gt;
            &lt;p&gt;Google 提供的公共免费 DNS，应该是最流行的 公共 DNS 了&lt;/p&gt;&lt;p&gt;IPv4&lt;/p&gt;&lt;p&gt;&lt;code&gt;8.8.8.8&lt;/code&gt;&lt;br&gt;&lt;code&gt;8.8.4.4&lt;/code&gt;&lt;/p&gt;&lt;p&gt;IPv6&lt;/p&gt;&lt;p&gt;&lt;code&gt;2001:4860:4860::8888&lt;/code&gt;&lt;br&gt;&lt;code&gt;2001:4860:4860::8844&lt;/code&gt;&lt;/p&gt;
          &lt;/div&gt;

&lt;h2 id=&quot;Cloudflare-DNS&quot;&gt;&lt;a href=&quot;#Cloudflare-DNS&quot; class=&quot;headerlink&quot; title=&quot;Cloudflare DNS&quot;&gt;&lt;/a&gt;&lt;span class=&quot;exturl&quot; data-url=&quot;aHR0cHM6Ly8xLjEuMS4xL3poLUhhbnMv&quot; title=&quot;https://1.1.1.1/zh-Hans/&quot;&gt;Cloudflare DNS&lt;i class=&quot;fa fa-external-link&quot;&gt;&lt;/i&gt;&lt;/span&gt;&lt;/h2&gt;&lt;div class=&quot;note success&quot;&gt;
            &lt;p&gt;Cloudflare DNS 是 Cloudflare 与 APNIC 联合推出的号称全球最快的 DNS 服务。APNIC 是一个管理亚太与大洋洲地区 IP 地址分配的非盈利性组织，1.1.1.1 归 APNIC 所有，现在交给 Cloudflare 来提供 DNS 服务&lt;/p&gt;&lt;p&gt;IPv4&lt;/p&gt;&lt;p&gt;&lt;code&gt;1.1.1.1&lt;/code&gt;&lt;br&gt;&lt;code&gt;1.0.0.1&lt;/code&gt;&lt;/p&gt;&lt;p&gt;IPv6&lt;/p&gt;&lt;p&gt;&lt;code&gt;2606:4700:4700::1111&lt;/code&gt;&lt;br&gt;&lt;code&gt;2606:4700:4700::1001&lt;/code&gt;&lt;/p&gt;
          &lt;/div&gt;
    
    </summary>
    
    
      <category term="Tool" scheme="https://www.meaoo.cn/categories/Tool/"/>
    
    
      <category term="Tool" scheme="https://www.meaoo.cn/tags/Tool/"/>
    
  </entry>
  
  <entry>
    <title>OpenCart使用SMTP发送邮件配置</title>
    <link href="https://www.meaoo.cn/2018/05/08/20180508001.html"/>
    <id>https://www.meaoo.cn/2018/05/08/20180508001.html</id>
    <published>2018-05-07T16:00:00.000Z</published>
    <updated>2021-01-26T03:20:45.080Z</updated>
    
    <content type="html"><![CDATA[<blockquote><p>自从使用OpenCart开始，就遇到一个问题，邮件无法发送。与是就选择了回避，但是，避不可避，就解决吧。</p></blockquote><h1 id="本地调试"><a href="#本地调试" class="headerlink" title="本地调试"></a>本地调试</h1><p><code>Error: EHLO not accepted from server!</code>当使用到发送邮件的时候，会出现这么一个错误。与是根据错误提示路径，找到如下地址<br><code>/opencart/system/library/mail/smtp.php</code><br>,发现是<code>substr</code>的问题导致的。于是，输出<code>$reply</code>参数，发现是空的，竟然是空的。<br>然后找代码</p><ol><li><code>$reply</code>的值是<code>$line</code>拼接出来的</li><li><code>$line</code>是由<code>fgets($handle, 515)</code>拿到的</li><li><code>$handle</code>是<code>fsockopen($hostname, $this-&gt;smtp_port, $errno, $errstr, $this-&gt;smtp_timeout);</code>得到的</li></ol><p>当打印<code>$handle</code>的时候，会发现，是报错的。</p><a id="more"></a><h2 id="解决"><a href="#解决" class="headerlink" title="解决"></a>解决</h2><ol><li>进入管理平台，进行设置，位置如下<code>系统设置--&gt;网店设置--&gt;选择要设置的网店--&gt;商店--&gt;E-Mail</code>参数，需要与<code>邮件</code>内配置的邮件相同，如下图</li></ol><p><img src="https://raw.githubusercontent.com/meaoo/blog_img/master/2018/05/08/53816299.jpg" alt="商店设置"><br><img src="https://raw.githubusercontent.com/meaoo/blog_img/master/2018/05/08/40488174.jpg" alt="邮件设置"></p><ol start="2"><li>然后设置<code>邮件标签内容</code></li></ol><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">选择邮件引擎：`smtp`</span><br><span class="line"></span><br><span class="line">SMTP主机：`smtp.163.com`（我用的是163邮箱）</span><br><span class="line"></span><br><span class="line">SMTP用户名：`test@163.com`（即你的邮箱）</span><br><span class="line"></span><br><span class="line">SMTP密码：`test`</span><br><span class="line"></span><br><span class="line">SMTP端口：`25`</span><br><span class="line"></span><br><span class="line">SMTP超时：`5`</span><br></pre></td></tr></table></figure><h2 id="结果"><a href="#结果" class="headerlink" title="结果"></a>结果</h2><p>测试结果成功，如下图<br><img src="https://raw.githubusercontent.com/meaoo/blog_img/master/2018/05/08/74193999.jpg" alt="邮件发送"></p><h1 id="发布线上"><a href="#发布线上" class="headerlink" title="发布线上"></a>发布线上</h1><p>发布线上一定注意，如果你是阿里云之类的，请使用ssl请求地址，也就是发送邮件的端口需要使用465，因为大部分云服务器厂商为了安全，将25端口关闭。但是使用465端口，需要使用ssl请求，所以需要在邮件发送地址前，加上<code>ssl://</code>配置如下</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">选择邮件引擎：`smtp`</span><br><span class="line"></span><br><span class="line">SMTP主机：`ssl://smtp.163.com`（我用的是163邮箱）</span><br><span class="line"></span><br><span class="line">SMTP用户名：`test@163.com`（即你的邮箱）</span><br><span class="line"></span><br><span class="line">SMTP密码：`test`</span><br><span class="line"></span><br><span class="line">SMTP端口：`465`</span><br><span class="line"></span><br><span class="line">SMTP超时：`5`</span><br></pre></td></tr></table></figure><p>一定要在<code>SMTP主机</code>地址前面，加上<code>ssl:</code>，如下图<br><img src="https://raw.githubusercontent.com/meaoo/blog_img/master/2018/05/08/30254734.jpg" alt="服务器配置"></p><h2 id="结果-1"><a href="#结果-1" class="headerlink" title="结果"></a>结果</h2><p>结果如下图，邮件发送成功<br><img src="https://raw.githubusercontent.com/meaoo/blog_img/master/2018/05/08/63986707.jpg" alt="服务器发送成功"></p><h1 id="结束"><a href="#结束" class="headerlink" title="结束"></a>结束</h1><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">E-mail：blog<span class="meta">@meaoo</span>.cn</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      &lt;blockquote&gt;
&lt;p&gt;自从使用OpenCart开始，就遇到一个问题，邮件无法发送。与是就选择了回避，但是，避不可避，就解决吧。&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h1 id=&quot;本地调试&quot;&gt;&lt;a href=&quot;#本地调试&quot; class=&quot;headerlink&quot; title=&quot;本地调试&quot;&gt;&lt;/a&gt;本地调试&lt;/h1&gt;&lt;p&gt;&lt;code&gt;Error: EHLO not accepted from server!&lt;/code&gt;当使用到发送邮件的时候，会出现这么一个错误。与是根据错误提示路径，找到如下地址&lt;br&gt;&lt;code&gt;/opencart/system/library/mail/smtp.php&lt;/code&gt;&lt;br&gt;,发现是&lt;code&gt;substr&lt;/code&gt;的问题导致的。于是，输出&lt;code&gt;$reply&lt;/code&gt;参数，发现是空的，竟然是空的。&lt;br&gt;然后找代码&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;&lt;code&gt;$reply&lt;/code&gt;的值是&lt;code&gt;$line&lt;/code&gt;拼接出来的&lt;/li&gt;
&lt;li&gt;&lt;code&gt;$line&lt;/code&gt;是由&lt;code&gt;fgets($handle, 515)&lt;/code&gt;拿到的&lt;/li&gt;
&lt;li&gt;&lt;code&gt;$handle&lt;/code&gt;是&lt;code&gt;fsockopen($hostname, $this-&amp;gt;smtp_port, $errno, $errstr, $this-&amp;gt;smtp_timeout);&lt;/code&gt;得到的&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;当打印&lt;code&gt;$handle&lt;/code&gt;的时候，会发现，是报错的。&lt;/p&gt;
    
    </summary>
    
    
      <category term="OpenCart" scheme="https://www.meaoo.cn/categories/OpenCart/"/>
    
    
      <category term="PHP" scheme="https://www.meaoo.cn/tags/PHP/"/>
    
      <category term="OpenCart" scheme="https://www.meaoo.cn/tags/OpenCart/"/>
    
  </entry>
  
</feed>
